[
  {
    "name": "enter_tournament",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < EnterTournament >",
      "tournament_id: u64"
    ],
    "attributes": [
      "# [doc = \" トーナメントへの参加登録を行うが、\"]",
      "# [doc = \" EntryAccount.player と ctx.accounts.player.key() の照合チェックがない\"]"
    ],
    "body": [
      "let entry = & mut ctx . accounts . entry ;",
      "let tournament = & ctx . accounts . tournament ;",
      "let fee = tournament . fee ;",
      "* * ctx . accounts . organizer . to_account_info () . lamports . borrow_mut () += fee ;",
      "* * ctx . accounts . player . to_account_info () . lamports . borrow_mut () -= fee ;",
      "entry . tournament = tournament_id ;",
      "entry . player = ctx . accounts . player . key () ;",
      "entry . registered = true ;",
      "Ok (())"
    ]
  },
  {
    "name": "EnterTournament",
    "node_type": "struct",
    "fields": [
      {
        "name": "entry",
        "attribute": "# [account (mut)] # [doc = \" 本来は #[account(has_one = player)] や constraint で照合すべき\"]",
        "field_type": "Account < 'info , EntryAccount >"
      },
      {
        "name": "tournament",
        "attribute": "# [doc = \" トーナメント設定アカウント（fee フィールドのみ使用）\"]",
        "field_type": "Account < 'info , Tournament >"
      },
      {
        "name": "organizer",
        "attribute": "# [doc = \" 参加料受取先の主催者アカウント\"] # [account (mut)]",
        "field_type": "AccountInfo < 'info >"
      },
      {
        "name": "player",
        "attribute": "# [doc = \" 参加者ユーザー（署名者）。登録データとの照合検証がない\"] # [account (mut)]",
        "field_type": "Signer < 'info >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "EntryAccount",
    "node_type": "struct",
    "fields": [
      {
        "name": "tournament",
        "attribute": "# [doc = \" 登録したトーナメントの ID\"]",
        "field_type": "u64"
      },
      {
        "name": "player",
        "attribute": "# [doc = \" 登録者の Pubkey\"]",
        "field_type": "Pubkey"
      },
      {
        "name": "registered",
        "attribute": "# [doc = \" 登録済みフラグ\"]",
        "field_type": "bool"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "Tournament",
    "node_type": "struct",
    "fields": [
      {
        "name": "fee",
        "attribute": "# [doc = \" 参加料（Lamports）\"]",
        "field_type": "u64"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]