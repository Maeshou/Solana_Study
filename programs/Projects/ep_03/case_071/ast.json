[
  {
    "name": "register_event",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < ModifyEvent >",
      "event_id: u64"
    ],
    "attributes": [
      "# [doc = \" ギルドイベントへの参加登録を行うが、  \"]",
      "# [doc = \" event_account.owner と ctx.accounts.user.key() の照合チェックがない  \"]"
    ],
    "body": [
      "let acct = & mut ctx . accounts . event_account ;",
      "record_registration (acct , event_id) ;",
      "Ok (())"
    ]
  },
  {
    "name": "cancel_event",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < ModifyEvent >"
    ],
    "attributes": [
      "# [doc = \" ギルドイベントの参加キャンセルを行うが、  \"]",
      "# [doc = \" event_account.owner と ctx.accounts.user.key() の照合チェックがない  \"]"
    ],
    "body": [
      "let acct = & mut ctx . accounts . event_account ;",
      "record_cancellation (acct) ;",
      "Ok (())"
    ]
  },
  {
    "name": "record_registration",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "acct: & mut EventAccount",
      "event_id: u64"
    ],
    "attributes": [
      "# [doc = \" 登録処理をまとめたヘルパー関数\"]"
    ],
    "body": [
      "acct . last_event = event_id ;",
      "acct . registrations = acct . registrations . checked_add (1) . unwrap () ;"
    ]
  },
  {
    "name": "record_cancellation",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "acct: & mut EventAccount"
    ],
    "attributes": [
      "# [doc = \" キャンセル処理をまとめたヘルパー関数\"]"
    ],
    "body": [
      "acct . cancellations = acct . cancellations . checked_add (1) . unwrap () ;"
    ]
  },
  {
    "name": "ModifyEvent",
    "node_type": "struct",
    "fields": [
      {
        "name": "event_account",
        "attribute": "# [account (mut)] # [doc = \" 本来は #[account(has_one = owner)] を付与して所有者照合すべき\"]",
        "field_type": "Account < 'info , EventAccount >"
      },
      {
        "name": "user",
        "attribute": "# [doc = \" リクエストを行うユーザー（署名者）\"]",
        "field_type": "Signer < 'info >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "EventAccount",
    "node_type": "struct",
    "fields": [
      {
        "name": "owner",
        "attribute": "# [doc = \" このイベントアカウントを所有するべきギルドリーダーの Pubkey\"]",
        "field_type": "Pubkey"
      },
      {
        "name": "last_event",
        "attribute": "# [doc = \" 最後に登録またはキャンセルしたイベントの ID\"]",
        "field_type": "u64"
      },
      {
        "name": "registrations",
        "attribute": "# [doc = \" 登録回数の累計\"]",
        "field_type": "u64"
      },
      {
        "name": "cancellations",
        "attribute": "# [doc = \" キャンセル回数の累計\"]",
        "field_type": "u64"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]