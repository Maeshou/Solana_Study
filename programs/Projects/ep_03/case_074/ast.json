[
  {
    "name": "delegate",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < Delegate >",
      "delegatee: Pubkey"
    ],
    "attributes": [
      "# [doc = \" 投票権を別のユーザーに委任するが、\"]",
      "# [doc = \" delegate_account.owner と ctx.accounts.user.key() の一致検証がない\"]"
    ],
    "body": [
      "let acct = & mut ctx . accounts . delegate_account ;",
      "apply_delegate (acct , delegatee) ;",
      "Ok (())"
    ]
  },
  {
    "name": "revoke_delegation",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < RevokeDelegation >"
    ],
    "attributes": [
      "# [doc = \" 委任を解除するが、\"]",
      "# [doc = \" delegate_account.owner と ctx.accounts.user.key() の一致検証がない\"]"
    ],
    "body": [
      "let acct = & mut ctx . accounts . delegate_account ;",
      "apply_revoke (acct) ;",
      "Ok (())"
    ]
  },
  {
    "name": "apply_delegate",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "acct: & mut DelegateAccount",
      "delegatee: Pubkey"
    ],
    "attributes": [
      "# [doc = \" DelegateAccount に委任先をセットし、カウンタをインクリメントするヘルパー\"]"
    ],
    "body": [
      "acct . current_delegate = delegatee ;",
      "acct . active_delegation = true ;",
      "acct . delegation_count = acct . delegation_count . checked_add (1) . unwrap () ;"
    ]
  },
  {
    "name": "apply_revoke",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "acct: & mut DelegateAccount"
    ],
    "attributes": [
      "# [doc = \" DelegateAccount の委任情報をクリアし、解除カウンタをインクリメントするヘルパー\"]"
    ],
    "body": [
      "acct . current_delegate = Pubkey :: default () ;",
      "acct . active_delegation = false ;",
      "acct . revoke_count = acct . revoke_count . checked_add (1) . unwrap () ;"
    ]
  },
  {
    "name": "Delegate",
    "node_type": "struct",
    "fields": [
      {
        "name": "delegate_account",
        "attribute": "# [account (mut)] # [doc = \" 本来は #[account(has_one = owner)] で所有者一致を検証すべき\"]",
        "field_type": "Account < 'info , DelegateAccount >"
      },
      {
        "name": "user",
        "attribute": "# [doc = \" 委任をリクエストするユーザー（署名者）\"]",
        "field_type": "Signer < 'info >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "RevokeDelegation",
    "node_type": "struct",
    "fields": [
      {
        "name": "delegate_account",
        "attribute": "# [account (mut)] # [doc = \" 本来は #[account(has_one = owner)] で所有者一致を検証すべき\"]",
        "field_type": "Account < 'info , DelegateAccount >"
      },
      {
        "name": "user",
        "attribute": "# [doc = \" 解除をリクエストするユーザー（署名者）\"]",
        "field_type": "Signer < 'info >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "DelegateAccount",
    "node_type": "struct",
    "fields": [
      {
        "name": "owner",
        "attribute": "# [doc = \" 本来この口座を所有するべきユーザーの Pubkey\"]",
        "field_type": "Pubkey"
      },
      {
        "name": "current_delegate",
        "attribute": "# [doc = \" 現在委任中のユーザーの Pubkey\"]",
        "field_type": "Pubkey"
      },
      {
        "name": "delegation_count",
        "attribute": "# [doc = \" 累計委任回数\"]",
        "field_type": "u64"
      },
      {
        "name": "revoke_count",
        "attribute": "# [doc = \" 累計解除回数\"]",
        "field_type": "u64"
      },
      {
        "name": "active_delegation",
        "attribute": "# [doc = \" 現在委任中かどうかのフラグ\"]",
        "field_type": "bool"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]