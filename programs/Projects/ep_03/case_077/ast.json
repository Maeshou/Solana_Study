[
  {
    "name": "unlock_skill",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < UnlockSkill >",
      "skill_id: u8"
    ],
    "attributes": [
      "# [doc = \" 指定のスキルをアンロックするが、\"]",
      "# [doc = \" skill_account.owner と ctx.accounts.user.key() の一致検証がない\"]"
    ],
    "body": [
      "let skill_acc = & mut ctx . accounts . skill_account ;",
      "record_unlock (skill_acc , skill_id) ;",
      "Ok (())"
    ]
  },
  {
    "name": "reset_skills",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < ResetSkills >"
    ],
    "attributes": [
      "# [doc = \" 全スキルをリセットするが、\"]",
      "# [doc = \" skill_account.owner と ctx.accounts.user.key() の一致検証がない\"]"
    ],
    "body": [
      "let skill_acc = & mut ctx . accounts . skill_account ;",
      "clear_all (skill_acc) ;",
      "Ok (())"
    ]
  },
  {
    "name": "record_unlock",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "skill_acc: & mut SkillAccount",
      "skill_id: u8"
    ],
    "attributes": [
      "# [doc = \" スキルアンロックの内部ロジック\"]"
    ],
    "body": [
      "skill_acc . unlocked_skills . push (skill_id) ;",
      "skill_acc . unlock_count = skill_acc . unlock_count . checked_add (1) . unwrap () ;"
    ]
  },
  {
    "name": "clear_all",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "skill_acc: & mut SkillAccount"
    ],
    "attributes": [
      "# [doc = \" 全スキルをクリアする内部ロジック\"]"
    ],
    "body": [
      "skill_acc . unlocked_skills . clear () ;",
      "skill_acc . reset_count = skill_acc . reset_count . checked_add (1) . unwrap () ;"
    ]
  },
  {
    "name": "UnlockSkill",
    "node_type": "struct",
    "fields": [
      {
        "name": "skill_account",
        "attribute": "# [account (mut)] # [doc = \" 本来は `#[account(has_one = owner)]` を指定して所有者照合を行うべき\"]",
        "field_type": "Account < 'info , SkillAccount >"
      },
      {
        "name": "user",
        "attribute": "# [doc = \" 操作をリクエストするユーザー（署名者）\"]",
        "field_type": "Signer < 'info >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "ResetSkills",
    "node_type": "struct",
    "fields": [
      {
        "name": "skill_account",
        "attribute": "# [account (mut)] # [doc = \" 本来は `#[account(has_one = owner)]` を指定して所有者照合を行うべき\"]",
        "field_type": "Account < 'info , SkillAccount >"
      },
      {
        "name": "user",
        "attribute": "# [doc = \" 操作をリクエストするユーザー（署名者）\"]",
        "field_type": "Signer < 'info >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "SkillAccount",
    "node_type": "struct",
    "fields": [
      {
        "name": "owner",
        "attribute": "# [doc = \" 本来このスキルセットを所有するべきユーザーの Pubkey\"]",
        "field_type": "Pubkey"
      },
      {
        "name": "unlocked_skills",
        "attribute": "# [doc = \" アンロックされたスキル ID のリスト\"]",
        "field_type": "Vec < u8 >"
      },
      {
        "name": "unlock_count",
        "attribute": "# [doc = \" アンロック操作回数\"]",
        "field_type": "u64"
      },
      {
        "name": "reset_count",
        "attribute": "# [doc = \" リセット操作回数\"]",
        "field_type": "u64"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]