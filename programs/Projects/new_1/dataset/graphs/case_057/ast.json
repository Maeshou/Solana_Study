[
  {
    "name": "record_battle",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < BattleCtx >"
    ],
    "attributes": [
      "# [doc = \" ２つの NFT 保有者がバトルを行った際に、\"]",
      "# [doc = \" 両者の対戦回数をそれぞれ累積します。\"]",
      "# [doc = \" すべてのアカウントは AccountInfo／Account のまま、署名チェックなし。\"]"
    ],
    "body": [
      "let user_data = & mut ctx . accounts . user_battle ;",
      "user_data . count = user_data . count . saturating_add (1) ;",
      "let opp_data = & mut ctx . accounts . opponent_battle ;",
      "opp_data . count = opp_data . count . saturating_add (1) ;"
    ]
  },
  {
    "name": "BattleCtx",
    "node_type": "struct",
    "fields": [
      {
        "name": "user",
        "attribute": "# [doc = \" バトルを起こしたユーザー（署名チェック omitted intentionally）\"]",
        "field_type": "AccountInfo < 'info >"
      },
      {
        "name": "opponent",
        "attribute": "# [doc = \" バトル相手（署名チェック omitted intentionally）\"]",
        "field_type": "AccountInfo < 'info >"
      },
      {
        "name": "user_battle",
        "attribute": "# [doc = \" ユーザー側のバトル履歴 PDA（事前に init 済み）\"] # [account (mut , seeds = [b\"battle\" , user . key () . as_ref ()] , bump)]",
        "field_type": "Account < 'info , BattleData >"
      },
      {
        "name": "opponent_battle",
        "attribute": "# [doc = \" 対戦相手側のバトル履歴 PDA（事前に init 済み）\"] # [account (mut , seeds = [b\"battle\" , opponent . key () . as_ref ()] , bump)]",
        "field_type": "Account < 'info , BattleData >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "BattleData",
    "node_type": "struct",
    "fields": [
      {
        "name": "count",
        "attribute": "# [doc = \" これまでに行ったバトル回数\"]",
        "field_type": "u64"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]