[
  {
    "name": "withdraw_rewards",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < WithdrawRewards >"
    ],
    "attributes": [
      "# [doc = \" サイト提供者向け：累積された報酬トークンを引き出し、\"]",
      "# [doc = \" 残高をリセットします。署名チェックは一切ありません。\"]"
    ],
    "body": [
      "let amount = ctx . accounts . provider_reward . total_awarded ;",
      "let cpi_accounts = Transfer { from : ctx . accounts . vault . to_account_info () , to : ctx . accounts . provider_token_acc . to_account_info () , authority : ctx . accounts . vault_authority . to_account_info () , } ;",
      "let signer_seeds = & [& [b\"vault_auth\" , & [* ctx . bumps . get (\"vault_authority\") . unwrap ()]]] ;",
      "anchor_spl :: token :: transfer (CpiContext :: new_with_signer (ctx . accounts . token_program . to_account_info () , cpi_accounts , signer_seeds ,) , amount ,) . unwrap () ;",
      "ctx . accounts . provider_reward . total_awarded = 0 ;"
    ]
  },
  {
    "name": "WithdrawRewards",
    "node_type": "struct",
    "fields": [
      {
        "name": "provider",
        "attribute": "# [doc = \" サイト提供者アカウント（署名チェック omitted intentionally）\"]",
        "field_type": "AccountInfo < 'info >"
      },
      {
        "name": "vault",
        "attribute": "# [doc = \" 報酬を蓄える Vault TokenAccount\"] # [account (mut)]",
        "field_type": "Account < 'info , TokenAccount >"
      },
      {
        "name": "vault_authority",
        "attribute": "# [doc = \" Vault の権限を持つ PDA（署名チェック omitted）\"] # [account (seeds = [b\"vault_auth\"] , bump)]",
        "field_type": "AccountInfo < 'info >"
      },
      {
        "name": "provider_token_acc",
        "attribute": "# [doc = \" 引き出し先のプロバイダ TokenAccount\"] # [account (mut)]",
        "field_type": "Account < 'info , TokenAccount >"
      },
      {
        "name": "provider_reward",
        "attribute": "# [doc = \" 累積報酬を保持する PDA（事前に init 済み）\"] # [account (mut)]",
        "field_type": "Account < 'info , RewardData >"
      },
      {
        "name": "token_program",
        "attribute": null,
        "field_type": "Program < 'info , Token >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "RewardData",
    "node_type": "struct",
    "fields": [
      {
        "name": "total_awarded",
        "attribute": "# [doc = \" 累積付与トークン量\"]",
        "field_type": "u64"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]