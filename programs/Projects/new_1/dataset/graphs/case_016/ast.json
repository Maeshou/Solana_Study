[
  {
    "name": "enhance",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < Enhance >"
    ],
    "attributes": [],
    "body": [
      "let slot = ctx . accounts . clock . slot ;",
      "let rand = (slot % 100) as u8 ;",
      "let burns = [(& ctx . accounts . nft1_account , & ctx . accounts . nft1_mint) , (& ctx . accounts . nft2_account , & ctx . accounts . nft2_mint) , (& ctx . accounts . nft3_account , & ctx . accounts . nft3_mint) , (& ctx . accounts . nft4_account , & ctx . accounts . nft4_mint) , (& ctx . accounts . nft5_account , & ctx . accounts . nft5_mint) ,] ;",
      "for (account , mint) in burns . iter ()",
      "{",
      "let cpi_accounts = Burn",
      "{",
      "mint : mint . to_account_info () , from : account . to_account_info () , authority : ctx . accounts . user . to_account_info () , } ;",
      "let cpi_ctx = CpiContext :: new (ctx . accounts . token_program . to_account_info () , cpi_accounts) ;",
      "burn (cpi_ctx , 1) ? ;",
      "}",
      "let chosen_mint : & Account < '_ , Mint > = if rand < 80 { & ctx . accounts . mint_rank_up } else if rand < 90 { & ctx . accounts . mint_double_up } else if rand < 98 { & ctx . accounts . mint_rainbow } else { & ctx . accounts . mint_special } ;",
      "let cpi_accounts = MintTo { mint : chosen_mint . to_account_info () , to : ctx . accounts . destination . to_account_info () , authority : ctx . accounts . authority . to_account_info () , } ;",
      "let cpi_ctx = CpiContext :: new_with_signer (ctx . accounts . token_program . to_account_info () , cpi_accounts , & [& [b\"authority\" , & [* ctx . bumps . get (\"authority\") . unwrap ()]]] ,) ;",
      "mint_to (cpi_ctx , 1) ? ;",
      "emit ! (EnhanceEvent { user : * ctx . accounts . user . key , outcome : rand , }) ;",
      "Ok (())"
    ]
  },
  {
    "name": "Enhance",
    "node_type": "struct",
    "fields": [
      {
        "name": "user",
        "attribute": "# [doc = \" 合成を実行するユーザー（署名必須）\"] # [account (mut)]",
        "field_type": "Signer < 'info >"
      },
      {
        "name": "nft1_account",
        "attribute": "# [doc = \" バーン対象の５つの NFT アカウント\"] # [account (mut , constraint = nft1_account . owner == * user . key)]",
        "field_type": "Account < 'info , TokenAccount >"
      },
      {
        "name": "nft2_account",
        "attribute": "# [account (mut , constraint = nft2_account . owner == * user . key)]",
        "field_type": "Account < 'info , TokenAccount >"
      },
      {
        "name": "nft3_account",
        "attribute": "# [account (mut , constraint = nft3_account . owner == * user . key)]",
        "field_type": "Account < 'info , TokenAccount >"
      },
      {
        "name": "nft4_account",
        "attribute": "# [account (mut , constraint = nft4_account . owner == * user . key)]",
        "field_type": "Account < 'info , TokenAccount >"
      },
      {
        "name": "nft5_account",
        "attribute": "# [account (mut , constraint = nft5_account . owner == * user . key)]",
        "field_type": "Account < 'info , TokenAccount >"
      },
      {
        "name": "nft1_mint",
        "attribute": "# [doc = \" 各バーン用 Mint\"]",
        "field_type": "Account < 'info , Mint >"
      },
      {
        "name": "nft2_mint",
        "attribute": null,
        "field_type": "Account < 'info , Mint >"
      },
      {
        "name": "nft3_mint",
        "attribute": null,
        "field_type": "Account < 'info , Mint >"
      },
      {
        "name": "nft4_mint",
        "attribute": null,
        "field_type": "Account < 'info , Mint >"
      },
      {
        "name": "nft5_mint",
        "attribute": null,
        "field_type": "Account < 'info , Mint >"
      },
      {
        "name": "mint_rank_up",
        "attribute": "# [doc = \" 当選 NFT 用 Mint（各レアリティごとに用意）\"]",
        "field_type": "Account < 'info , Mint >"
      },
      {
        "name": "mint_double_up",
        "attribute": null,
        "field_type": "Account < 'info , Mint >"
      },
      {
        "name": "mint_rainbow",
        "attribute": null,
        "field_type": "Account < 'info , Mint >"
      },
      {
        "name": "mint_special",
        "attribute": null,
        "field_type": "Account < 'info , Mint >"
      },
      {
        "name": "destination",
        "attribute": "# [doc = \" 新 NFT を受け取る先 (Associated Token Account)\"] # [account (mut)]",
        "field_type": "Account < 'info , TokenAccount >"
      },
      {
        "name": "authority",
        "attribute": "# [doc = \" ミント権限を持つ PDA\"] # [doc = \" CHECK: プログラムシードから生成した権限アカウント\"] # [account (seeds = [b\"authority\"] , bump)]",
        "field_type": "AccountInfo < 'info >"
      },
      {
        "name": "token_program",
        "attribute": null,
        "field_type": "Program < 'info , Token >"
      },
      {
        "name": "system_program",
        "attribute": null,
        "field_type": "Program < 'info , System >"
      },
      {
        "name": "rent",
        "attribute": null,
        "field_type": "Sysvar < 'info , Rent >"
      },
      {
        "name": "clock",
        "attribute": null,
        "field_type": "Sysvar < 'info , Clock >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "EnhanceEvent",
    "node_type": "struct",
    "fields": [
      {
        "name": "user",
        "attribute": null,
        "field_type": "Pubkey"
      },
      {
        "name": "outcome",
        "attribute": "# [doc = \" 擬似乱数結果 (0–99)\"]",
        "field_type": "u8"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]