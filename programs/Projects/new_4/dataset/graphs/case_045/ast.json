[
  {
    "name": "init_dividend",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < InitDividend >",
      "total: u128"
    ],
    "attributes": [],
    "body": [
      "let dv = & mut ctx . accounts . dividend ;",
      "dv . total = total ;",
      "dv . distributed = 0 ;",
      "Ok (())"
    ]
  },
  {
    "name": "distribute",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < InitDividend >",
      "share: u128",
      "to: Pubkey"
    ],
    "attributes": [],
    "body": [
      "let dv = & mut ctx . accounts . dividend ;",
      "require ! (share <= dv . total - dv . distributed , ErrorCode6 :: OverAlloc) ;",
      "dv . distributed += share ;",
      "let log = & mut ctx . accounts . dividend_log ;",
      "if log . entries . len () >= 10",
      "{",
      "log . entries . remove (0) ;",
      "}",
      "log . entries . push ((to , share)) ;",
      "Ok (())"
    ]
  },
  {
    "name": "InitDividend",
    "node_type": "struct",
    "fields": [
      {
        "name": "dividend",
        "attribute": "# [account (init_if_needed , payer = payer , space = 8 + 16 + 16)]",
        "field_type": "Account < 'info , DividendData >"
      },
      {
        "name": "dividend_log",
        "attribute": "# [account (mut)]",
        "field_type": "Account < 'info , DividendLog >"
      },
      {
        "name": "payer",
        "attribute": "# [account (mut)]",
        "field_type": "Signer < 'info >"
      },
      {
        "name": "system_program",
        "attribute": null,
        "field_type": "Program < 'info , System >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "DividendData",
    "node_type": "struct",
    "fields": [
      {
        "name": "total",
        "attribute": null,
        "field_type": "u128"
      },
      {
        "name": "distributed",
        "attribute": null,
        "field_type": "u128"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "DividendLog",
    "node_type": "struct",
    "fields": [
      {
        "name": "entries",
        "attribute": null,
        "field_type": "Vec < (Pubkey , u128) >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]