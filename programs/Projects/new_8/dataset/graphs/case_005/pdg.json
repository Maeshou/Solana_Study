[
  {
    "name": "write_score",
    "inputs": [
      "ctx: Context < WriteScore >",
      "user_tag: [u8 ; 8]",
      "score: u32",
      "bump: u8"
    ],
    "nodes": [
      {
        "id": 0,
        "label": "Entry"
      },
      {
        "id": 1,
        "label": "let mut tag = user_tag ;"
      },
      {
        "id": 2,
        "label": "let mut weight : u32 = 1 ;"
      },
      {
        "id": 3,
        "label": "for i in 0 .. tag . len () { if tag [i] . is_ascii_lowercase () { tag [i] = tag [i] - 32 ; } weight = weight . wrapping_mul (131) . wrapping_add (tag [i] as u32) ; }"
      },
      {
        "id": 4,
        "label": "if tag [i] . is_ascii_lowercase () { tag [i] = tag [i] - 32 ; }"
      },
      {
        "id": 5,
        "label": "tag [i] = tag [i] - 32 ;"
      },
      {
        "id": 6,
        "label": "weight = weight . wrapping_mul (131) . wrapping_add (tag [i] as u32) ;"
      },
      {
        "id": 7,
        "label": "let seeds = [& ctx . accounts . admin . key () . to_bytes () [..] , & tag [..]] ;"
      },
      {
        "id": 8,
        "label": "let addr = Pubkey :: create_program_address (& seeds , & ctx . program_id , & [bump]) . map_err (| _ | error ! (ScoreError :: BadCell)) ? ;"
      },
      {
        "id": 9,
        "label": "if addr != ctx . accounts . score_cell . key () { return Err (error ! (ScoreError :: BadCell)) ; }"
      },
      {
        "id": 10,
        "label": "return Err (error ! (ScoreError :: BadCell)) ;"
      },
      {
        "id": 11,
        "label": "let mut s = score ;"
      },
      {
        "id": 12,
        "label": "if s > 100000 { s = 100000 ; }"
      },
      {
        "id": 13,
        "label": "s = 100000 ;"
      },
      {
        "id": 14,
        "label": "let entry = & mut ctx . accounts . entry ;"
      },
      {
        "id": 15,
        "label": "entry . admin = ctx . accounts . admin . key () ;"
      },
      {
        "id": 16,
        "label": "entry . tag = tag ;"
      },
      {
        "id": 17,
        "label": "entry . points = entry . points . saturating_add (s) ;"
      },
      {
        "id": 18,
        "label": "entry . bias = entry . bias . wrapping_add (weight) ;"
      },
      {
        "id": 19,
        "label": "Ok (())"
      }
    ],
    "edges": [
      {
        "from": 1,
        "to": 1,
        "label": "def: tag"
      },
      {
        "from": 1,
        "to": 3,
        "label": "data_dep: tag"
      },
      {
        "from": 1,
        "to": 3,
        "label": "data_dep: tag"
      },
      {
        "from": 1,
        "to": 3,
        "label": "data_dep: tag"
      },
      {
        "from": 1,
        "to": 3,
        "label": "data_dep: tag"
      },
      {
        "from": 1,
        "to": 3,
        "label": "data_dep: tag"
      },
      {
        "from": 1,
        "to": 4,
        "label": "data_dep: tag"
      },
      {
        "from": 1,
        "to": 4,
        "label": "data_dep: tag"
      },
      {
        "from": 1,
        "to": 4,
        "label": "data_dep: tag"
      },
      {
        "from": 1,
        "to": 5,
        "label": "data_dep: tag"
      },
      {
        "from": 1,
        "to": 5,
        "label": "data_dep: tag"
      },
      {
        "from": 1,
        "to": 6,
        "label": "data_dep: tag"
      },
      {
        "from": 7,
        "to": 7,
        "label": "def: seeds"
      },
      {
        "from": 1,
        "to": 7,
        "label": "data_dep: tag"
      },
      {
        "from": 8,
        "to": 8,
        "label": "def: addr"
      },
      {
        "from": 7,
        "to": 8,
        "label": "data_dep: seeds"
      },
      {
        "from": 8,
        "to": 9,
        "label": "data_dep: addr"
      },
      {
        "from": 11,
        "to": 11,
        "label": "def: s"
      },
      {
        "from": 11,
        "to": 12,
        "label": "data_dep: s"
      },
      {
        "from": 11,
        "to": 12,
        "label": "data_dep: s"
      },
      {
        "from": 11,
        "to": 13,
        "label": "data_dep: s"
      },
      {
        "from": 14,
        "to": 14,
        "label": "def: entry"
      },
      {
        "from": 14,
        "to": 15,
        "label": "data_dep: entry"
      },
      {
        "from": 14,
        "to": 16,
        "label": "data_dep: entry"
      },
      {
        "from": 1,
        "to": 16,
        "label": "data_dep: tag"
      },
      {
        "from": 14,
        "to": 17,
        "label": "data_dep: entry"
      },
      {
        "from": 14,
        "to": 17,
        "label": "data_dep: entry"
      },
      {
        "from": 11,
        "to": 17,
        "label": "data_dep: s"
      },
      {
        "from": 14,
        "to": 18,
        "label": "data_dep: entry"
      },
      {
        "from": 14,
        "to": 18,
        "label": "data_dep: entry"
      }
    ]
  }
]