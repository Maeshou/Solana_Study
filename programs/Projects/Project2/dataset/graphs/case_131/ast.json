[
  {
    "name": "initialize_logger",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < InitializeLogger >",
      "mint: Pubkey"
    ],
    "attributes": [
      "# [doc = \" ロガーアカウントを初期化：所有者と監視対象の Mint を設定\"]"
    ],
    "body": [
      "let logger = & mut ctx . accounts . logger ;",
      "logger . owner = ctx . accounts . authority . key () ;",
      "logger . mint = mint ;",
      "logger . last_amount = 0 ;",
      "Ok (())"
    ]
  },
  {
    "name": "record_amount",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < RecordAmount >"
    ],
    "attributes": [
      "# [doc = \" 指定トークンアカウントのトークン残高を記録\"]"
    ],
    "body": [
      "let logger = & mut ctx . accounts . logger ;",
      "let token_acc = & ctx . accounts . token_account ;",
      "logger . last_amount = token_acc . amount ;",
      "msg ! (\"Recorded {} tokens for mint {}\" , logger . last_amount , logger . mint) ;",
      "Ok (())"
    ]
  },
  {
    "name": "TokenLogger",
    "node_type": "struct",
    "fields": [
      {
        "name": "owner",
        "attribute": null,
        "field_type": "Pubkey"
      },
      {
        "name": "mint",
        "attribute": null,
        "field_type": "Pubkey"
      },
      {
        "name": "last_amount",
        "attribute": null,
        "field_type": "u64"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "InitializeLogger",
    "node_type": "struct",
    "fields": [
      {
        "name": "logger",
        "attribute": "# [doc = \" ロガーを一度だけ初期化する通常アカウント\"] # [account (init , payer = authority , space = 8 + 32 + 32 + 8)]",
        "field_type": "Account < 'info , TokenLogger >"
      },
      {
        "name": "authority",
        "attribute": "# [doc = \" 初期化権限を持つ署名者\"] # [account (mut)]",
        "field_type": "Signer < 'info >"
      },
      {
        "name": "system_program",
        "attribute": null,
        "field_type": "Program < 'info , System >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "RecordAmount",
    "node_type": "struct",
    "fields": [
      {
        "name": "logger",
        "attribute": "# [doc = \" 既存のロガー、owner フィールドと一致する署名者のみ許可\"] # [account (mut , has_one = owner ,)]",
        "field_type": "Account < 'info , TokenLogger >"
      },
      {
        "name": "token_account",
        "attribute": "# [doc = \" 監視対象トークンアカウント  \"] # [doc = \" - 所有者が SPL Token プログラム  \"] # [doc = \" - mint が logger.mint  \"] # [doc = \" - authority が logger.owner  \"] # [account (mut , token :: mint = logger . mint , token :: authority = logger . owner)]",
        "field_type": "Account < 'info , TokenAccount >"
      },
      {
        "name": "owner",
        "attribute": "# [doc = \" logger.owner に一致する署名者\"] # [account (signer)]",
        "field_type": "AccountInfo < 'info >"
      },
      {
        "name": "token_program",
        "attribute": null,
        "field_type": "Program < 'info , anchor_spl :: token :: Token >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]