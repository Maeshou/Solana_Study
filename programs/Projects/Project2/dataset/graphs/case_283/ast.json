[
  {
    "name": "breed",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < Breed >",
      "parent1: u64",
      "parent2: u64"
    ],
    "attributes": [
      "# [doc = \" ブリーディング申請\"]"
    ],
    "body": [
      "let bd = & mut ctx . accounts . breed_data ;",
      "let key = (parent1 , parent2) ;",
      "let cnt = bd . user_breeds . entry (ctx . accounts . user . key ()) . or_insert (0) ;",
      "if * cnt < bd . max_per_user",
      "{",
      "* cnt = cnt . saturating_add (1) ;",
      "bd . pair_counts . entry (key) . and_modify (| c | * c += 1) . or_insert (1) ;",
      "} else",
      "{",
      "bd . blocked += 1 ;",
      "}",
      "Ok (())"
    ]
  },
  {
    "name": "Breed",
    "node_type": "struct",
    "fields": [
      {
        "name": "breed_data",
        "attribute": "# [account (mut)]",
        "field_type": "Account < 'info , BreedData >"
      },
      {
        "name": "user",
        "attribute": null,
        "field_type": "Signer < 'info >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "BreedData",
    "node_type": "struct",
    "fields": [
      {
        "name": "max_per_user",
        "attribute": null,
        "field_type": "u64"
      },
      {
        "name": "user_breeds",
        "attribute": null,
        "field_type": "BTreeMap < Pubkey , u64 >"
      },
      {
        "name": "pair_counts",
        "attribute": null,
        "field_type": "BTreeMap < (u64 , u64) , u64 >"
      },
      {
        "name": "blocked",
        "attribute": null,
        "field_type": "u64"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]