[
  {
    "name": "harvest",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < Harvest >",
      "node_id: u8"
    ],
    "attributes": [],
    "body": [
      "let rh = & mut ctx . accounts . res ;",
      "rh . counts . insert (node_id , rh . counts . get (& node_id) . copied () . unwrap_or (0) + 1) ;",
      "if rh . counts . len () > 10",
      "{",
      "let smallest = * rh . counts . keys () . min () . unwrap () ;",
      "rh . counts . remove (& smallest) ;",
      "}",
      "Ok (())"
    ]
  },
  {
    "name": "Harvest",
    "node_type": "struct",
    "fields": [
      {
        "name": "res",
        "attribute": "# [account (mut)]",
        "field_type": "Account < 'info , ResourceData >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "ResourceData",
    "node_type": "struct",
    "fields": [
      {
        "name": "counts",
        "attribute": null,
        "field_type": "BTreeMap < u8 , u64 >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]