[
  {
    "name": "Lottery",
    "node_type": "struct",
    "fields": [
      {
        "name": "",
        "attribute": null,
        "field_type": "Vec < Pubkey >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "initialize",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < Initialize >"
    ],
    "attributes": [
      "# [doc = \" Lottery を初期化（PDA のみ生成。Vec は Default::default() で空に）\"]"
    ],
    "body": [
      "Ok (())"
    ]
  },
  {
    "name": "join",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < Join >"
    ],
    "attributes": [
      "# [doc = \" 参加者登録：自身の Pubkey を participants に追加\"]"
    ],
    "body": [
      "let lottery = & mut ctx . accounts . lottery . 0 ;",
      "lottery . push (ctx . accounts . user . key ()) ;",
      "Ok (())"
    ]
  },
  {
    "name": "pick_winner",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < PickWinner >"
    ],
    "attributes": [
      "# [doc = \" 当選者決定：clock のタイムスタンプを乱数源に使い、participants から選出\"]"
    ],
    "body": [
      "let participants = & mut ctx . accounts . lottery . 0 ;",
      "let now = ctx . accounts . clock . unix_timestamp as usize ;",
      "if participants . is_empty ()",
      "{",
      "return Err (error ! (ErrorCode :: NoParticipants)) ;",
      "}",
      "let idx = now % participants . len () ;",
      "let winner = participants [idx] ;",
      "participants . clear () ;",
      "Ok (winner)"
    ]
  },
  {
    "name": "reset",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < Reset >"
    ],
    "attributes": [
      "# [doc = \" リセット：参加者一覧をクリア\"]"
    ],
    "body": [
      "ctx . accounts . lottery . 0 . clear () ;",
      "Ok (())"
    ]
  },
  {
    "name": "Initialize",
    "node_type": "struct",
    "fields": [
      {
        "name": "lottery",
        "attribute": "# [doc = \" PDA を init するだけ。内部 Vec はデフォルトで空\"] # [account (init_zeroed , payer = authority , seeds = [b\"lottery\" , authority . key () . as_ref ()] , bump , space = 8 + (4 + 10 * 32))]",
        "field_type": "Account < 'info , Lottery >"
      },
      {
        "name": "authority",
        "attribute": "# [account (mut)]",
        "field_type": "Signer < 'info >"
      },
      {
        "name": "system_program",
        "attribute": null,
        "field_type": "Program < 'info , System >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "Join",
    "node_type": "struct",
    "fields": [
      {
        "name": "lottery",
        "attribute": "# [account (mut , seeds = [b\"lottery\" , authority . key () . as_ref ()] , bump = lottery . to_account_info () . data . borrow () [0] ,)]",
        "field_type": "Account < 'info , Lottery >"
      },
      {
        "name": "user",
        "attribute": "# [account (mut)]",
        "field_type": "Signer < 'info >"
      },
      {
        "name": "system_program",
        "attribute": null,
        "field_type": "Program < 'info , System >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "PickWinner",
    "node_type": "struct",
    "fields": [
      {
        "name": "lottery",
        "attribute": "# [account (mut , seeds = [b\"lottery\" , authority . key () . as_ref ()] , bump = lottery . to_account_info () . data . borrow () [0] ,)]",
        "field_type": "Account < 'info , Lottery >"
      },
      {
        "name": "authority",
        "attribute": "# [account (mut)]",
        "field_type": "Signer < 'info >"
      },
      {
        "name": "clock",
        "attribute": null,
        "field_type": "Sysvar < 'info , Clock >"
      },
      {
        "name": "system_program",
        "attribute": null,
        "field_type": "Program < 'info , System >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "Reset",
    "node_type": "struct",
    "fields": [
      {
        "name": "lottery",
        "attribute": "# [account (mut , seeds = [b\"lottery\" , authority . key () . as_ref ()] , bump = lottery . to_account_info () . data . borrow () [0] ,)]",
        "field_type": "Account < 'info , Lottery >"
      },
      {
        "name": "authority",
        "attribute": "# [account (mut)]",
        "field_type": "Signer < 'info >"
      },
      {
        "name": "system_program",
        "attribute": null,
        "field_type": "Program < 'info , System >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]