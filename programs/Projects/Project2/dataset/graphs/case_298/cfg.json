[
  {
    "name": "record_volume",
    "nodes": [
      {
        "id": 0,
        "label": "Entry"
      },
      {
        "id": 1,
        "label": "let df = & mut ctx . accounts . fee ;"
      },
      {
        "id": 2,
        "label": "df . buffer [df . index as usize] = volume ;"
      },
      {
        "id": 3,
        "label": "df . index = (df . index + 1) % (df . buffer . len () as u8) ;"
      },
      {
        "id": 4,
        "label": "df . count = df . count . saturating_add (1) . min (df . buffer . len () as u64) ;"
      },
      {
        "id": 5,
        "label": "let sum : u128 = df . buffer . iter () . take (df . count as usize) . map (| & v | v as u128) . sum () ;"
      },
      {
        "id": 6,
        "label": "df . current_fee = ((sum / df . count as u128) as u64) / df . divisor ;"
      },
      {
        "id": 7,
        "label": "Ok (())"
      }
    ],
    "edges": [
      {
        "from": 0,
        "to": 1,
        "label": "next"
      },
      {
        "from": 1,
        "to": 2,
        "label": "next"
      },
      {
        "from": 2,
        "to": 3,
        "label": "next"
      },
      {
        "from": 3,
        "to": 4,
        "label": "next"
      },
      {
        "from": 4,
        "to": 5,
        "label": "next"
      },
      {
        "from": 5,
        "to": 6,
        "label": "next"
      },
      {
        "from": 6,
        "to": 7,
        "label": "next"
      }
    ]
  }
]