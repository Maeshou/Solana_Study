[
  {
    "name": "init_kiosk",
    "inputs": [
      "ctx: Context < InitKiosk >",
      "seed: u32"
    ],
    "nodes": [
      {
        "id": 0,
        "label": "Entry"
      },
      {
        "id": 1,
        "label": "let m = & mut ctx . accounts . meter ;"
      },
      {
        "id": 2,
        "label": "m . arcade = ctx . accounts . arcade . key () ;"
      },
      {
        "id": 3,
        "label": "m . lane = 9 ;"
      },
      {
        "id": 4,
        "label": "m . dispensed = 0 ;"
      },
      {
        "id": 5,
        "label": "m . entropy = seed . rotate_left (9) ^ 0xA55A_33CC ;"
      },
      {
        "id": 6,
        "label": "let a = & mut ctx . accounts . arcade ;"
      },
      {
        "id": 7,
        "label": "a . owner = ctx . accounts . operator . key () ;"
      },
      {
        "id": 8,
        "label": "a . float = (seed as u64) * 3 + 500 ;"
      },
      {
        "id": 9,
        "label": "a . state = Offline ;"
      },
      {
        "id": 10,
        "label": "m . arcade = a . key () ;"
      },
      {
        "id": 11,
        "label": "let mut s64 = (seed as u64) . wrapping_mul (6364136223846793005) . wrapping_add (1) ;"
      },
      {
        "id": 12,
        "label": "let h1 = & mut ctx . accounts . hopper_a ;"
      },
      {
        "id": 13,
        "label": "h1 . arcade = a . key () ;"
      },
      {
        "id": 14,
        "label": "h1 . chute = (s64 as u8) & 7 ;"
      },
      {
        "id": 15,
        "label": "h1 . coins = ((s64 & 255) as u32) + 80 ;"
      },
      {
        "id": 16,
        "label": "s64 = s64 . wrapping_mul (6364136223846793005) . wrapping_add (1) ;"
      },
      {
        "id": 17,
        "label": "let h2 = & mut ctx . accounts . hopper_b ;"
      },
      {
        "id": 18,
        "label": "h2 . arcade = a . key () ;"
      },
      {
        "id": 19,
        "label": "h2 . chute = ((s64 >> 3) as u8) & 7 ;"
      },
      {
        "id": 20,
        "label": "h2 . coins = (((s64 >> 8) & 255) as u32) + 75 ;"
      },
      {
        "id": 21,
        "label": "Ok (())"
      }
    ],
    "edges": [
      {
        "from": 1,
        "to": 1,
        "label": "def: m"
      },
      {
        "from": 1,
        "to": 2,
        "label": "data_dep: m"
      },
      {
        "from": 1,
        "to": 3,
        "label": "data_dep: m"
      },
      {
        "from": 1,
        "to": 4,
        "label": "data_dep: m"
      },
      {
        "from": 1,
        "to": 5,
        "label": "data_dep: m"
      },
      {
        "from": 6,
        "to": 6,
        "label": "def: a"
      },
      {
        "from": 6,
        "to": 7,
        "label": "data_dep: a"
      },
      {
        "from": 6,
        "to": 8,
        "label": "data_dep: a"
      },
      {
        "from": 6,
        "to": 9,
        "label": "data_dep: a"
      },
      {
        "from": 1,
        "to": 10,
        "label": "data_dep: m"
      },
      {
        "from": 6,
        "to": 10,
        "label": "data_dep: a"
      },
      {
        "from": 11,
        "to": 11,
        "label": "def: s64"
      },
      {
        "from": 12,
        "to": 12,
        "label": "def: h1"
      },
      {
        "from": 12,
        "to": 13,
        "label": "data_dep: h1"
      },
      {
        "from": 6,
        "to": 13,
        "label": "data_dep: a"
      },
      {
        "from": 12,
        "to": 14,
        "label": "data_dep: h1"
      },
      {
        "from": 11,
        "to": 14,
        "label": "data_dep: s64"
      },
      {
        "from": 12,
        "to": 15,
        "label": "data_dep: h1"
      },
      {
        "from": 11,
        "to": 15,
        "label": "data_dep: s64"
      },
      {
        "from": 11,
        "to": 16,
        "label": "data_dep: s64"
      },
      {
        "from": 11,
        "to": 16,
        "label": "data_dep: s64"
      },
      {
        "from": 17,
        "to": 17,
        "label": "def: h2"
      },
      {
        "from": 17,
        "to": 18,
        "label": "data_dep: h2"
      },
      {
        "from": 6,
        "to": 18,
        "label": "data_dep: a"
      },
      {
        "from": 17,
        "to": 19,
        "label": "data_dep: h2"
      },
      {
        "from": 11,
        "to": 19,
        "label": "data_dep: s64"
      },
      {
        "from": 17,
        "to": 20,
        "label": "data_dep: h2"
      },
      {
        "from": 11,
        "to": 20,
        "label": "data_dep: s64"
      }
    ]
  },
  {
    "name": "vend",
    "inputs": [
      "ctx: Context < Vend >",
      "presses: u32"
    ],
    "nodes": [
      {
        "id": 22,
        "label": "Entry"
      },
      {
        "id": 23,
        "label": "let a = & mut ctx . accounts . arcade ;"
      },
      {
        "id": 24,
        "label": "let h1 = & mut ctx . accounts . hopper_a ;"
      },
      {
        "id": 25,
        "label": "let h2 = & mut ctx . accounts . hopper_b ;"
      },
      {
        "id": 26,
        "label": "let m = & mut ctx . accounts . meter ;"
      },
      {
        "id": 27,
        "label": "for i in 0 .. presses { let mix = ((h1 . coins ^ h2 . coins) as u64) . wrapping_mul (780291637) ; let take = ((mix & 7) + 1) as u32 ; h1 . coins = h1 . coins . saturating_sub (take . min (h1 . coins)) ; h2 . coins = h2 . coins . checked_add (take + (i & 3)) . unwrap_or (u32 :: MAX) ; m . dispensed = m . dispensed . saturating_add (take as u64) ; m . entropy ^= (mix as u32) . rotate_left ((i % 11) as u32) ; }"
      },
      {
        "id": 28,
        "label": "let mix = ((h1 . coins ^ h2 . coins) as u64) . wrapping_mul (780291637) ;"
      },
      {
        "id": 29,
        "label": "let take = ((mix & 7) + 1) as u32 ;"
      },
      {
        "id": 30,
        "label": "h1 . coins = h1 . coins . saturating_sub (take . min (h1 . coins)) ;"
      },
      {
        "id": 31,
        "label": "h2 . coins = h2 . coins . checked_add (take + (i & 3)) . unwrap_or (u32 :: MAX) ;"
      },
      {
        "id": 32,
        "label": "m . dispensed = m . dispensed . saturating_add (take as u64) ;"
      },
      {
        "id": 33,
        "label": "m . entropy ^= (mix as u32) . rotate_left ((i % 11) as u32) ;"
      },
      {
        "id": 34,
        "label": "let total = h1 . coins as u64 + h2 . coins as u64 + m . dispensed ;"
      },
      {
        "id": 35,
        "label": "if total > a . float { a . state = Locked ; h1 . chute ^= 1 ; h2 . chute = h2 . chute . saturating_add (1) ; m . lane = m . lane . saturating_add (1) ; msg ! (\"locked: lanes tweaked, meter lane++\") ; } else { a . state = Serving ; h1 . coins = h1 . coins . saturating_add (9) ; h2 . coins = h2 . coins / 2 + 11 ; m . entropy ^= 0x0F0F_F0F0 ; msg ! (\"serving: coin adjust & entropy flip\") ; }"
      },
      {
        "id": 36,
        "label": "a . state = Locked ;"
      },
      {
        "id": 37,
        "label": "h1 . chute ^= 1 ;"
      },
      {
        "id": 38,
        "label": "h2 . chute = h2 . chute . saturating_add (1) ;"
      },
      {
        "id": 39,
        "label": "m . lane = m . lane . saturating_add (1) ;"
      },
      {
        "id": 40,
        "label": "msg ! (\"locked: lanes tweaked, meter lane++\") ;"
      },
      {
        "id": 41,
        "label": "a . state = Serving ;"
      },
      {
        "id": 42,
        "label": "h1 . coins = h1 . coins . saturating_add (9) ;"
      },
      {
        "id": 43,
        "label": "h2 . coins = h2 . coins / 2 + 11 ;"
      },
      {
        "id": 44,
        "label": "m . entropy ^= 0x0F0F_F0F0 ;"
      },
      {
        "id": 45,
        "label": "msg ! (\"serving: coin adjust & entropy flip\") ;"
      },
      {
        "id": 46,
        "label": "Ok (())"
      }
    ],
    "edges": [
      {
        "from": 23,
        "to": 23,
        "label": "def: a"
      },
      {
        "from": 24,
        "to": 24,
        "label": "def: h1"
      },
      {
        "from": 25,
        "to": 25,
        "label": "def: h2"
      },
      {
        "from": 26,
        "to": 26,
        "label": "def: m"
      },
      {
        "from": 24,
        "to": 27,
        "label": "data_dep: h1"
      },
      {
        "from": 25,
        "to": 27,
        "label": "data_dep: h2"
      },
      {
        "from": 24,
        "to": 27,
        "label": "data_dep: h1"
      },
      {
        "from": 24,
        "to": 27,
        "label": "data_dep: h1"
      },
      {
        "from": 24,
        "to": 27,
        "label": "data_dep: h1"
      },
      {
        "from": 25,
        "to": 27,
        "label": "data_dep: h2"
      },
      {
        "from": 25,
        "to": 27,
        "label": "data_dep: h2"
      },
      {
        "from": 26,
        "to": 27,
        "label": "data_dep: m"
      },
      {
        "from": 26,
        "to": 27,
        "label": "data_dep: m"
      },
      {
        "from": 26,
        "to": 27,
        "label": "data_dep: m"
      },
      {
        "from": 28,
        "to": 28,
        "label": "def: mix"
      },
      {
        "from": 24,
        "to": 28,
        "label": "data_dep: h1"
      },
      {
        "from": 25,
        "to": 28,
        "label": "data_dep: h2"
      },
      {
        "from": 29,
        "to": 29,
        "label": "def: take"
      },
      {
        "from": 28,
        "to": 29,
        "label": "data_dep: mix"
      },
      {
        "from": 24,
        "to": 30,
        "label": "data_dep: h1"
      },
      {
        "from": 24,
        "to": 30,
        "label": "data_dep: h1"
      },
      {
        "from": 29,
        "to": 30,
        "label": "data_dep: take"
      },
      {
        "from": 24,
        "to": 30,
        "label": "data_dep: h1"
      },
      {
        "from": 25,
        "to": 31,
        "label": "data_dep: h2"
      },
      {
        "from": 25,
        "to": 31,
        "label": "data_dep: h2"
      },
      {
        "from": 29,
        "to": 31,
        "label": "data_dep: take"
      },
      {
        "from": 26,
        "to": 32,
        "label": "data_dep: m"
      },
      {
        "from": 26,
        "to": 32,
        "label": "data_dep: m"
      },
      {
        "from": 29,
        "to": 32,
        "label": "data_dep: take"
      },
      {
        "from": 26,
        "to": 33,
        "label": "data_dep: m"
      },
      {
        "from": 28,
        "to": 33,
        "label": "data_dep: mix"
      },
      {
        "from": 34,
        "to": 34,
        "label": "def: total"
      },
      {
        "from": 24,
        "to": 34,
        "label": "data_dep: h1"
      },
      {
        "from": 25,
        "to": 34,
        "label": "data_dep: h2"
      },
      {
        "from": 26,
        "to": 34,
        "label": "data_dep: m"
      },
      {
        "from": 34,
        "to": 35,
        "label": "data_dep: total"
      },
      {
        "from": 23,
        "to": 35,
        "label": "data_dep: a"
      },
      {
        "from": 23,
        "to": 35,
        "label": "data_dep: a"
      },
      {
        "from": 24,
        "to": 35,
        "label": "data_dep: h1"
      },
      {
        "from": 25,
        "to": 35,
        "label": "data_dep: h2"
      },
      {
        "from": 25,
        "to": 35,
        "label": "data_dep: h2"
      },
      {
        "from": 26,
        "to": 35,
        "label": "data_dep: m"
      },
      {
        "from": 26,
        "to": 35,
        "label": "data_dep: m"
      },
      {
        "from": 23,
        "to": 35,
        "label": "data_dep: a"
      },
      {
        "from": 24,
        "to": 35,
        "label": "data_dep: h1"
      },
      {
        "from": 24,
        "to": 35,
        "label": "data_dep: h1"
      },
      {
        "from": 25,
        "to": 35,
        "label": "data_dep: h2"
      },
      {
        "from": 25,
        "to": 35,
        "label": "data_dep: h2"
      },
      {
        "from": 26,
        "to": 35,
        "label": "data_dep: m"
      },
      {
        "from": 23,
        "to": 36,
        "label": "data_dep: a"
      },
      {
        "from": 24,
        "to": 37,
        "label": "data_dep: h1"
      },
      {
        "from": 25,
        "to": 38,
        "label": "data_dep: h2"
      },
      {
        "from": 25,
        "to": 38,
        "label": "data_dep: h2"
      },
      {
        "from": 26,
        "to": 39,
        "label": "data_dep: m"
      },
      {
        "from": 26,
        "to": 39,
        "label": "data_dep: m"
      },
      {
        "from": 23,
        "to": 41,
        "label": "data_dep: a"
      },
      {
        "from": 24,
        "to": 42,
        "label": "data_dep: h1"
      },
      {
        "from": 24,
        "to": 42,
        "label": "data_dep: h1"
      },
      {
        "from": 25,
        "to": 43,
        "label": "data_dep: h2"
      },
      {
        "from": 25,
        "to": 43,
        "label": "data_dep: h2"
      },
      {
        "from": 26,
        "to": 44,
        "label": "data_dep: m"
      }
    ]
  }
]