[
  {
    "name": "enhance_five",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < EnhanceCtx >",
      "base_rank: u8",
      "random_seed: u64"
    ],
    "attributes": [],
    "body": [
      "let result = & mut ctx . accounts . result ;",
      "result . user = ctx . accounts . user . key () ;",
      "result . base_rank = base_rank ;",
      "let r = random_seed % 1000 ;",
      "let is_rank1 = (r < 800) as u8 ;",
      "let is_rank2 = ((r >= 800) as u8) * ((r < 950) as u8) ;",
      "let is_rainbow = ((r >= 950) as u8) * ((r < 990) as u8) ;",
      "let is_special = ((r >= 990) as u8) ;",
      "result . result_type = is_rank1 * 0 + is_rank2 * 1 + is_rainbow * 2 + is_special * 3 ;",
      "result . result_rank = base_rank + is_rank1 + is_rank2 * 2 ;",
      "Ok (())"
    ]
  },
  {
    "name": "show",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < EnhanceCtx >"
    ],
    "attributes": [],
    "body": [
      "let r = & ctx . accounts . result ;",
      "msg ! (\"User: {}\" , r . user) ;",
      "msg ! (\"Base Rank: {}\" , r . base_rank) ;",
      "msg ! (\"Result Type: {}\" , r . result_type) ;",
      "msg ! (\"Result Rank: {}\" , r . result_rank) ;",
      "Ok (())"
    ]
  },
  {
    "name": "EnhanceCtx",
    "node_type": "struct",
    "fields": [
      {
        "name": "result",
        "attribute": "# [account (mut , has_one = user)]",
        "field_type": "Account < 'info , EnhanceResult >"
      },
      {
        "name": "user",
        "attribute": "# [account (signer)]",
        "field_type": "Signer < 'info >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "EnhanceResult",
    "node_type": "struct",
    "fields": [
      {
        "name": "user",
        "attribute": null,
        "field_type": "Pubkey"
      },
      {
        "name": "base_rank",
        "attribute": null,
        "field_type": "u8"
      },
      {
        "name": "result_type",
        "attribute": null,
        "field_type": "u8"
      },
      {
        "name": "result_rank",
        "attribute": null,
        "field_type": "u8"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]