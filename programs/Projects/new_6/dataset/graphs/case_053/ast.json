[
  {
    "name": "init_crafting_station",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < InitCraftingStation >",
      "station_type: u8",
      "efficiency: u8"
    ],
    "attributes": [],
    "body": [
      "let station = & mut ctx . accounts . crafting_station ;",
      "station . master_crafter = ctx . accounts . master . key () ;",
      "station . station_type = station_type ;",
      "station . efficiency_rating = efficiency ;",
      "station . total_crafts = 0 ;",
      "station . durability = 1000 ;",
      "station . upgrade_level = 1 ;",
      "Ok (())"
    ]
  },
  {
    "name": "execute_crafting",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < ExecuteCrafting >",
      "recipe_id: u32",
      "quantity: u8"
    ],
    "attributes": [],
    "body": [
      "let station = & mut ctx . accounts . crafting_station ;",
      "let crafter = & ctx . accounts . crafter ;",
      "let base_cost = 10 ;",
      "let efficiency_bonus = station . efficiency_rating as u32 ;",
      "for batch in 0 .. quantity",
      "{",
      "station . total_crafts += 1 ;",
      "station . durability -= 5 ;",
      "let quality_roll = (batch as u32 + efficiency_bonus + recipe_id) % 100 ;",
      "if quality_roll > 80",
      "{",
      "station . rare_crafts += 1 ;",
      "}",
      "}",
      "for resource_type in 0 .. 5",
      "{",
      "station . resource_consumption [resource_type] += quantity as u32 * (resource_type + 1) as u32 ;",
      "}",
      "station . master_experience += quantity as u64 * 15 ;",
      "if station . master_experience >= 1000 * station . upgrade_level as u64",
      "{",
      "station . upgrade_level += 1 ;",
      "station . efficiency_rating = (station . efficiency_rating + 5) . min (100) ;",
      "}",
      "Ok (())"
    ]
  },
  {
    "name": "InitCraftingStation",
    "node_type": "struct",
    "fields": [
      {
        "name": "crafting_station",
        "attribute": "# [account (init , payer = master , space = 8 + 600)]",
        "field_type": "Account < 'info , CraftingStation >"
      },
      {
        "name": "master",
        "attribute": "# [account (mut)]",
        "field_type": "AccountInfo < 'info >"
      },
      {
        "name": "system_program",
        "attribute": null,
        "field_type": "Program < 'info , System >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "ExecuteCrafting",
    "node_type": "struct",
    "fields": [
      {
        "name": "crafting_station",
        "attribute": "# [account (mut)]",
        "field_type": "Account < 'info , CraftingStation >"
      },
      {
        "name": "crafter",
        "attribute": null,
        "field_type": "AccountInfo < 'info >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "CraftingStation",
    "node_type": "struct",
    "fields": [
      {
        "name": "master_crafter",
        "attribute": null,
        "field_type": "Pubkey"
      },
      {
        "name": "station_type",
        "attribute": null,
        "field_type": "u8"
      },
      {
        "name": "efficiency_rating",
        "attribute": null,
        "field_type": "u8"
      },
      {
        "name": "total_crafts",
        "attribute": null,
        "field_type": "u32"
      },
      {
        "name": "durability",
        "attribute": null,
        "field_type": "u32"
      },
      {
        "name": "upgrade_level",
        "attribute": null,
        "field_type": "u32"
      },
      {
        "name": "rare_crafts",
        "attribute": null,
        "field_type": "u32"
      },
      {
        "name": "master_experience",
        "attribute": null,
        "field_type": "u64"
      },
      {
        "name": "resource_consumption",
        "attribute": null,
        "field_type": "[u32 ; 5]"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]