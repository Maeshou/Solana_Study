[
  {
    "name": "init_tournament",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < InitTournament >",
      "entry_fee: u64",
      "max_participants: u32"
    ],
    "attributes": [],
    "body": [
      "let tournament = & mut ctx . accounts . tournament ;",
      "tournament . organizer = ctx . accounts . organizer . key () ;",
      "tournament . entry_fee = entry_fee ;",
      "tournament . max_participants = max_participants ;",
      "tournament . current_participants = 0 ;",
      "tournament . prize_pool = 0 ;",
      "tournament . tournament_status = 0 ;",
      "tournament . round_number = 1 ;",
      "Ok (())"
    ]
  },
  {
    "name": "advance_tournament",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < AdvanceTournament >",
      "eliminated_players: Vec < Pubkey >"
    ],
    "attributes": [],
    "body": [
      "let tournament = & mut ctx . accounts . tournament ;",
      "let controller = & ctx . accounts . controller ;",
      "tournament . round_number += 1 ;",
      "for eliminated in eliminated_players . iter ()",
      "{",
      "for i in 0 .. tournament . current_participants",
      "{",
      "if tournament . participants [i as usize] == * eliminated { tournament . participants [i as usize] = Pubkey :: default () ;",
      "tournament . current_participants -= 1 ;",
      "break ;",
      "} }",
      "}",
      "if tournament . current_participants <= 3",
      "{",
      "tournament . tournament_status = 2 ;",
      "let winner_prize = tournament . prize_pool * 60 / 100 ;",
      "let second_prize = tournament . prize_pool * 30 / 100 ;",
      "let third_prize = tournament . prize_pool * 10 / 100 ;",
      "tournament . prize_distribution = [winner_prize , second_prize , third_prize] ;",
      "}",
      "Ok (())"
    ]
  },
  {
    "name": "InitTournament",
    "node_type": "struct",
    "fields": [
      {
        "name": "tournament",
        "attribute": "# [account (init , payer = organizer , space = 8 + 2000)]",
        "field_type": "Account < 'info , TournamentData >"
      },
      {
        "name": "organizer",
        "attribute": "# [account (mut)]",
        "field_type": "AccountInfo < 'info >"
      },
      {
        "name": "system_program",
        "attribute": null,
        "field_type": "Program < 'info , System >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "AdvanceTournament",
    "node_type": "struct",
    "fields": [
      {
        "name": "tournament",
        "attribute": "# [account (mut)]",
        "field_type": "Account < 'info , TournamentData >"
      },
      {
        "name": "controller",
        "attribute": null,
        "field_type": "AccountInfo < 'info >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "TournamentData",
    "node_type": "struct",
    "fields": [
      {
        "name": "organizer",
        "attribute": null,
        "field_type": "Pubkey"
      },
      {
        "name": "entry_fee",
        "attribute": null,
        "field_type": "u64"
      },
      {
        "name": "max_participants",
        "attribute": null,
        "field_type": "u32"
      },
      {
        "name": "current_participants",
        "attribute": null,
        "field_type": "u32"
      },
      {
        "name": "prize_pool",
        "attribute": null,
        "field_type": "u64"
      },
      {
        "name": "tournament_status",
        "attribute": null,
        "field_type": "u8"
      },
      {
        "name": "round_number",
        "attribute": null,
        "field_type": "u32"
      },
      {
        "name": "participants",
        "attribute": null,
        "field_type": "[Pubkey ; 100]"
      },
      {
        "name": "prize_distribution",
        "attribute": null,
        "field_type": "[u64 ; 3]"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]