[
  {
    "name": "create_post",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < CreatePost >",
      "content: String"
    ],
    "attributes": [],
    "body": [
      "let p = & mut ctx . accounts . post ;",
      "p . body = content . clone () ;",
      "p . likes = 0 ;",
      "let word_count = content . split_whitespace () . count () as u32 ;",
      "p . word_count = word_count ;",
      "p . char_count = content . len () as u32 ;",
      "Ok (())"
    ]
  },
  {
    "name": "record_likes",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < RecordLikes >",
      "likes: Vec < u32 >"
    ],
    "attributes": [],
    "body": [
      "let p = & mut ctx . accounts . post ;",
      "let mut sum = 0u32 ;",
      "let mut max = 0u32 ;",
      "let mut min = u32 :: MAX ;",
      "for & l in likes . iter ()",
      "{",
      "sum += l ;",
      "if l > max",
      "{",
      "max = l ;",
      "} if l < min",
      "{",
      "min = l ;",
      "}",
      "}",
      "p . likes = sum ;",
      "p . max_like = max ;",
      "p . min_like = if likes . is_empty () { 0 } else { min } ;",
      "Ok (())"
    ]
  },
  {
    "name": "CreatePost",
    "node_type": "struct",
    "fields": [
      {
        "name": "post",
        "attribute": "# [account (init , payer = author , space = 8 + 64 + 4 * 4)]",
        "field_type": "Account < 'info , PostData >"
      },
      {
        "name": "author",
        "attribute": "# [account (mut)]",
        "field_type": "Signer < 'info >"
      },
      {
        "name": "system_program",
        "attribute": null,
        "field_type": "Program < 'info , System >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "RecordLikes",
    "node_type": "struct",
    "fields": [
      {
        "name": "post",
        "attribute": null,
        "field_type": "Account < 'info , PostData >"
      },
      {
        "name": "voter",
        "attribute": "# [account (mut)]",
        "field_type": "Signer < 'info >"
      },
      {
        "name": "system_program",
        "attribute": null,
        "field_type": "Program < 'info , System >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "PostData",
    "node_type": "struct",
    "fields": [
      {
        "name": "body",
        "attribute": null,
        "field_type": "String"
      },
      {
        "name": "likes",
        "attribute": null,
        "field_type": "u32"
      },
      {
        "name": "word_count",
        "attribute": null,
        "field_type": "u32"
      },
      {
        "name": "char_count",
        "attribute": null,
        "field_type": "u32"
      },
      {
        "name": "max_like",
        "attribute": null,
        "field_type": "u32"
      },
      {
        "name": "min_like",
        "attribute": null,
        "field_type": "u32"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]