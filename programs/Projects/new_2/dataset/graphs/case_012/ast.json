[
  {
    "name": "record_metrics",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < RecordMetrics >",
      "cpu_load: u8",
      "memory_mb: u16",
      "network_kbps: u32"
    ],
    "attributes": [
      "# [doc = \" 各種システム負荷指標を記録する（オーナーチェックを怠っている！）\"]"
    ],
    "body": [
      "let mut metrics = Metrics :: try_from_slice (& ctx . accounts . metrics_account . data . borrow ()) ? ;",
      "metrics . cpu_usage = cpu_load ;",
      "metrics . mem_usage = memory_mb ;",
      "metrics . net_usage = network_kbps ;",
      "metrics . serialize (& mut & mut ctx . accounts . metrics_account . data . borrow_mut () [..]) ? ;",
      "msg ! (\"Metrics updated → CPU: {}%, MEM: {}MB, NET: {}kbps\" , metrics . cpu_usage , metrics . mem_usage , metrics . net_usage) ;",
      "Ok (())"
    ]
  },
  {
    "name": "RecordMetrics",
    "node_type": "struct",
    "fields": [
      {
        "name": "metrics_account",
        "attribute": "# [doc = \" CHECK: owner チェックをせずに受け取っている生の AccountInfo\"] # [account (mut)]",
        "field_type": "AccountInfo < 'info >"
      },
      {
        "name": "signer",
        "attribute": "# [doc = \" 操作実行者の署名のみを検証\"]",
        "field_type": "Signer < 'info >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "Metrics",
    "node_type": "struct",
    "fields": [
      {
        "name": "cpu_usage",
        "attribute": "# [doc = \" CPU 使用率（0～100）\"]",
        "field_type": "u8"
      },
      {
        "name": "mem_usage",
        "attribute": "# [doc = \" メモリ使用量（MB）\"]",
        "field_type": "u16"
      },
      {
        "name": "net_usage",
        "attribute": "# [doc = \" ネットワーク使用量（kbps）\"]",
        "field_type": "u32"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]