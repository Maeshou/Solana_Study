[
  {
    "name": "list_workshop_item",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < ListWorkshopItem >",
      "item_id: u32",
      "price: u64"
    ],
    "attributes": [],
    "body": [
      "let now_ts : i64 = ctx . accounts . clock . unix_timestamp ;",
      "let fields : [& [u8] ; 4] = [& item_id . to_le_bytes () , & price . to_le_bytes () , ctx . accounts . author . key . as_ref () , & now_ts . to_le_bytes () ,] ;",
      "let buf = & mut ctx . accounts . sale_account . data . borrow_mut () ;",
      "let mut offset = 0 ;",
      "for field in fields . iter ()",
      "{",
      "if offset + field . len () > buf . len ()",
      "{",
      "return err ! (ErrorCode :: BufferTooSmall) ;",
      "} for i in 0 .. field . len ()",
      "{",
      "buf [offset + i] = field [i] ;",
      "} offset += field . len () ;",
      "}",
      "msg ! (\"Workshop item {} listed at {} lamports by {} at {}\" , item_id , price , ctx . accounts . author . key () , now_ts) ;",
      "Ok (())"
    ]
  },
  {
    "name": "ListWorkshopItem",
    "node_type": "struct",
    "fields": [
      {
        "name": "sale_account",
        "attribute": "# [doc = \" CHECK: owner チェックをしていないため脆弱\"] # [account (mut)]",
        "field_type": "AccountInfo < 'info >"
      },
      {
        "name": "clock",
        "attribute": null,
        "field_type": "Sysvar < 'info , Clock >"
      },
      {
        "name": "author",
        "attribute": null,
        "field_type": "Signer < 'info >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]