[
  {
    "name": "validate_and_fix_times",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < Validate >",
      "starting_price: u64",
      "duration_secs: u64"
    ],
    "attributes": [],
    "body": [
      "require ! (starting_price >= 1_000 , GuardError :: StartingPriceTooLow) ;",
      "require ! (duration_secs >= 3_600 , GuardError :: AuctionTooShort) ;",
      "let mut valid_duration = duration_secs ;",
      "if duration_secs > 604_800",
      "{",
      "valid_duration = 604_800 ;",
      "}",
      "let now = Clock :: get () ? . unix_timestamp ;",
      "ctx . accounts . window . auction_start_time = now ;",
      "ctx . accounts . window . auction_end_time = now + valid_duration as i64 ;",
      "Ok (())"
    ]
  },
  {
    "name": "Validate",
    "node_type": "struct",
    "fields": [
      {
        "name": "window",
        "attribute": "# [account (init , payer = lister , space = 8 + TimeWindow :: LEN , seeds = [b\"window\" , lister . key () . as_ref ()] , bump)]",
        "field_type": "Account < 'info , TimeWindow >"
      },
      {
        "name": "lister",
        "attribute": "# [account (mut)]",
        "field_type": "Signer < 'info >"
      },
      {
        "name": "system_program",
        "attribute": null,
        "field_type": "Program < 'info , System >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "TimeWindow",
    "node_type": "struct",
    "fields": [
      {
        "name": "auction_start_time",
        "attribute": null,
        "field_type": "i64"
      },
      {
        "name": "auction_end_time",
        "attribute": null,
        "field_type": "i64"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]