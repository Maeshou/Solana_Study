[
  {
    "name": "train_pet",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < TrainPet >",
      "training_sessions: u8"
    ],
    "attributes": [],
    "body": [
      "let pet = & mut ctx . accounts . pet_nft ;",
      "let total_cost = 100 * u64 :: from (training_sessions) ;",
      "let cpi_accounts = Transfer { from : ctx . accounts . player_token_account . to_account_info () , to : ctx . accounts . treasury_token_account . to_account_info () , authority : ctx . accounts . owner . to_account_info () , } ;",
      "let cpi_program = ctx . accounts . token_program . to_account_info () ;",
      "let cpi_ctx = CpiContext :: new (cpi_program , cpi_accounts) ;",
      "token :: transfer (cpi_ctx , total_cost) ? ;",
      "for i in 0 .. training_sessions",
      "{",
      "pet . loyalty += 1 ;",
      "let clock = Clock :: get () ? ;",
      "let pseudo_random = (clock . unix_timestamp as u64) . wrapping_add (i as u64) % 10 ;",
      "if pseudo_random < 4",
      "{",
      "pet . agility += 2 ;",
      "msg ! (\"Session",
      "{",
      "}: Agility increased!\" , i + 1) ;",
      "} if pseudo_random > 6",
      "{",
      "pet . intelligence += 2 ;",
      "msg ! (\"Session",
      "{",
      "}: Intelligence increased!\" , i + 1) ;",
      "} if pet . loyalty == 50",
      "{",
      "pet . skills . push (101) ;",
      "msg ! (\"Pet learned a new skill due to high loyalty!\") ;",
      "}",
      "}",
      "msg ! (\"Pet training complete. New Agility: {}, New Intelligence: {}\" , pet . agility , pet . intelligence) ;",
      "Ok (())"
    ]
  },
  {
    "name": "TrainPet",
    "node_type": "struct",
    "fields": [
      {
        "name": "pet_nft",
        "attribute": "# [account (mut , seeds = [b\"pet\" , owner . key () . as_ref () , pet_nft . mint . as_ref ()] , bump = pet_nft . bump)]",
        "field_type": "Account < 'info , PetNft >"
      },
      {
        "name": "player_token_account",
        "attribute": "# [account (mut)]",
        "field_type": "Account < 'info , TokenAccount >"
      },
      {
        "name": "treasury_token_account",
        "attribute": "# [account (mut)]",
        "field_type": "Account < 'info , TokenAccount >"
      },
      {
        "name": "owner",
        "attribute": "# [account (mut)]",
        "field_type": "Signer < 'info >"
      },
      {
        "name": "token_program",
        "attribute": null,
        "field_type": "Program < 'info , Token >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "PetNft",
    "node_type": "struct",
    "fields": [
      {
        "name": "mint",
        "attribute": null,
        "field_type": "Pubkey"
      },
      {
        "name": "loyalty",
        "attribute": null,
        "field_type": "u16"
      },
      {
        "name": "agility",
        "attribute": null,
        "field_type": "u32"
      },
      {
        "name": "intelligence",
        "attribute": null,
        "field_type": "u32"
      },
      {
        "name": "skills",
        "attribute": null,
        "field_type": "Vec < u16 >"
      },
      {
        "name": "bump",
        "attribute": null,
        "field_type": "u8"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]