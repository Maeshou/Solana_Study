[
  {
    "name": "initialize_artwork",
    "inputs": [
      "ctx: Context < InitializeArtwork >",
      "width: u16",
      "height: u16"
    ],
    "nodes": [
      {
        "id": 0,
        "label": "Entry"
      },
      {
        "id": 1,
        "label": "let artwork = & mut ctx . accounts . artwork ;"
      },
      {
        "id": 2,
        "label": "artwork . owner = ctx . accounts . owner . key () ;"
      },
      {
        "id": 3,
        "label": "artwork . width = width ;"
      },
      {
        "id": 4,
        "label": "artwork . height = height ;"
      },
      {
        "id": 5,
        "label": "artwork . is_published = false ;"
      },
      {
        "id": 6,
        "label": "Ok (())"
      }
    ],
    "edges": [
      {
        "from": 1,
        "to": 1,
        "label": "def: artwork"
      },
      {
        "from": 1,
        "to": 2,
        "label": "data_dep: artwork"
      },
      {
        "from": 1,
        "to": 3,
        "label": "data_dep: artwork"
      },
      {
        "from": 1,
        "to": 4,
        "label": "data_dep: artwork"
      },
      {
        "from": 1,
        "to": 5,
        "label": "data_dep: artwork"
      }
    ]
  },
  {
    "name": "update_palette_and_render_preview",
    "inputs": [
      "ctx: Context < UpdatePaletteAndRenderPreview >",
      "pixel_data: Vec < u8 >"
    ],
    "nodes": [
      {
        "id": 7,
        "label": "Entry"
      },
      {
        "id": 8,
        "label": "let artwork = & mut ctx . accounts . artwork ;"
      },
      {
        "id": 9,
        "label": "let palette = & mut ctx . accounts . palette ;"
      },
      {
        "id": 10,
        "label": "if palette . colors . len () == 0 { palette . colors = vec ! [Color { r : 0 , g : 0 , b : 0 } ; 256] ; }"
      },
      {
        "id": 11,
        "label": "palette . colors = vec ! [Color { r : 0 , g : 0 , b : 0 } ; 256] ;"
      },
      {
        "id": 12,
        "label": "for (i , p) in pixel_data . iter () . enumerate () { let color = & mut palette . colors [* p as usize] ; let new_r = color . r . checked_add (1) . unwrap_or (u8 :: MAX) ; let new_g = color . g . wrapping_add (1) ; color . r = new_r ; color . g = new_g ; color . b = color . b . checked_add (1) . unwrap_or (u8 :: MAX) ; if i % 10 == 0 { msg ! (\"Updated color at index {} to r:{}, g:{}, b:{}\" , p , color . r , color . g , color . b) ; } }"
      },
      {
        "id": 13,
        "label": "let color = & mut palette . colors [* p as usize] ;"
      },
      {
        "id": 14,
        "label": "let new_r = color . r . checked_add (1) . unwrap_or (u8 :: MAX) ;"
      },
      {
        "id": 15,
        "label": "let new_g = color . g . wrapping_add (1) ;"
      },
      {
        "id": 16,
        "label": "color . r = new_r ;"
      },
      {
        "id": 17,
        "label": "color . g = new_g ;"
      },
      {
        "id": 18,
        "label": "color . b = color . b . checked_add (1) . unwrap_or (u8 :: MAX) ;"
      },
      {
        "id": 19,
        "label": "if i % 10 == 0 { msg ! (\"Updated color at index {} to r:{}, g:{}, b:{}\" , p , color . r , color . g , color . b) ; }"
      },
      {
        "id": 20,
        "label": "msg ! (\"Updated color at index {} to r:{}, g:{}, b:{}\" , p , color . r , color . g , color . b) ;"
      },
      {
        "id": 21,
        "label": "let mut flag : u8 = 0b00000001 ;"
      },
      {
        "id": 22,
        "label": "if artwork . is_published { flag &= 0b11111110 ; } else { flag |= 0b00000010 ; }"
      },
      {
        "id": 23,
        "label": "flag &= 0b11111110 ;"
      },
      {
        "id": 24,
        "label": "flag |= 0b00000010 ;"
      },
      {
        "id": 25,
        "label": "Ok (())"
      }
    ],
    "edges": [
      {
        "from": 8,
        "to": 8,
        "label": "def: artwork"
      },
      {
        "from": 9,
        "to": 9,
        "label": "def: palette"
      },
      {
        "from": 9,
        "to": 10,
        "label": "data_dep: palette"
      },
      {
        "from": 9,
        "to": 10,
        "label": "data_dep: palette"
      },
      {
        "from": 9,
        "to": 11,
        "label": "data_dep: palette"
      },
      {
        "from": 9,
        "to": 12,
        "label": "data_dep: palette"
      },
      {
        "from": 13,
        "to": 13,
        "label": "def: color"
      },
      {
        "from": 9,
        "to": 13,
        "label": "data_dep: palette"
      },
      {
        "from": 14,
        "to": 14,
        "label": "def: new_r"
      },
      {
        "from": 13,
        "to": 14,
        "label": "data_dep: color"
      },
      {
        "from": 15,
        "to": 15,
        "label": "def: new_g"
      },
      {
        "from": 13,
        "to": 15,
        "label": "data_dep: color"
      },
      {
        "from": 13,
        "to": 16,
        "label": "data_dep: color"
      },
      {
        "from": 14,
        "to": 16,
        "label": "data_dep: new_r"
      },
      {
        "from": 13,
        "to": 17,
        "label": "data_dep: color"
      },
      {
        "from": 15,
        "to": 17,
        "label": "data_dep: new_g"
      },
      {
        "from": 13,
        "to": 18,
        "label": "data_dep: color"
      },
      {
        "from": 13,
        "to": 18,
        "label": "data_dep: color"
      },
      {
        "from": 8,
        "to": 22,
        "label": "data_dep: artwork"
      }
    ]
  }
]