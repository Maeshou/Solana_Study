[
  {
    "name": "conduct_arena_duel_round",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < ConductArenaDuel >"
    ],
    "attributes": [
      "# [doc = \" 2人のキャラクターが互いに攻撃し、HPを更新する1ラウンド分の処理です。\"]"
    ],
    "body": [
      "let player_one = & mut ctx . accounts . player_one ;",
      "let player_two = & mut ctx . accounts . player_two ;",
      "let duel_state = & mut ctx . accounts . duel_state ;",
      "let clock = Clock :: get () ? ;",
      "let luck_factor_one = (clock . slot % 10) . saturating_add (1) ;",
      "let luck_factor_two = (clock . slot % 12) . saturating_add (1) ;",
      "let damage_to_two = player_one . attack . saturating_mul (luck_factor_one) . saturating_sub (player_two . defense) ;",
      "player_two . current_health = player_two . current_health . saturating_sub (damage_to_two) ;",
      "let damage_to_one = player_two . attack . saturating_mul (luck_factor_two) . saturating_sub (player_one . defense) ;",
      "player_one . current_health = player_one . current_health . saturating_sub (damage_to_one) ;",
      "duel_state . round_number = duel_state . round_number . saturating_add (1) ;",
      "Ok (())"
    ]
  },
  {
    "name": "ConductArenaDuel",
    "node_type": "struct",
    "fields": [
      {
        "name": "player_one",
        "attribute": "# [account (mut)]",
        "field_type": "Account < 'info , DuelCharacter >"
      },
      {
        "name": "player_two",
        "attribute": "# [account (mut)]",
        "field_type": "Account < 'info , DuelCharacter >"
      },
      {
        "name": "duel_state",
        "attribute": "# [account (mut , has_one = player_one , has_one = player_two)]",
        "field_type": "Account < 'info , DuelState >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "DuelCharacter",
    "node_type": "struct",
    "fields": [
      {
        "name": "owner",
        "attribute": null,
        "field_type": "Pubkey"
      },
      {
        "name": "current_health",
        "attribute": null,
        "field_type": "u64"
      },
      {
        "name": "attack",
        "attribute": null,
        "field_type": "u64"
      },
      {
        "name": "defense",
        "attribute": null,
        "field_type": "u64"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "DuelState",
    "node_type": "struct",
    "fields": [
      {
        "name": "player_one",
        "attribute": null,
        "field_type": "Pubkey"
      },
      {
        "name": "player_two",
        "attribute": null,
        "field_type": "Pubkey"
      },
      {
        "name": "round_number",
        "attribute": null,
        "field_type": "u32"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]