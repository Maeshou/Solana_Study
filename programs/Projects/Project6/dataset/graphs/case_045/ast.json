[
  {
    "name": "init_beacon",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < InitBeacon >",
      "strength: u32"
    ],
    "attributes": [],
    "body": [
      "let b = & mut ctx . accounts . beacon ;",
      "b . lord = ctx . accounts . lord . key () ;",
      "b . strength = strength ;",
      "b . depth = 5 ;",
      "Ok (())"
    ]
  },
  {
    "name": "ignite",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < Ignite >",
      "shards: u64",
      "phase_index: u8"
    ],
    "attributes": [],
    "body": [
      "let b = & mut ctx . accounts . beacon ;",
      "if b . depth < 20",
      "{",
      "let mut i = 0u8 ;",
      "while i < 3",
      "{",
      "b . depth = b . depth . saturating_add (((i as u32) << 1) . saturating_add (1)) ;",
      "i = i . saturating_add (1) ;",
      "}",
      "}",
      "let coef : [u64 ; 3] = [90 , 110 , 140] ;",
      "let idx = if phase_index > 2 { 2 } else { phase_index } as usize ;",
      "let mut inc = shards . saturating_mul (coef [idx]) ;",
      "let mut r = 0u8 ;",
      "while r < 4",
      "{",
      "inc = inc . rotate_left (1) . wrapping_add (13) ;",
      "r = r . saturating_add (1) ;",
      "}",
      "b . strength = b . strength . saturating_add ((inc % 37) as u32) ;",
      "Ok (())"
    ]
  },
  {
    "name": "InitBeacon",
    "node_type": "struct",
    "fields": [
      {
        "name": "beacon",
        "attribute": "# [account (init , payer = lord , space = 8 + 32 + 4 + 4)]",
        "field_type": "Account < 'info , BeaconState >"
      },
      {
        "name": "lord",
        "attribute": "# [account (mut)]",
        "field_type": "Signer < 'info >"
      },
      {
        "name": "system_program",
        "attribute": null,
        "field_type": "Program < 'info , System >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "Ignite",
    "node_type": "struct",
    "fields": [
      {
        "name": "beacon",
        "attribute": "# [account (mut , has_one = lord)]",
        "field_type": "Account < 'info , BeaconState >"
      },
      {
        "name": "lord",
        "attribute": null,
        "field_type": "Signer < 'info >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "BeaconState",
    "node_type": "struct",
    "fields": [
      {
        "name": "lord",
        "attribute": null,
        "field_type": "Pubkey"
      },
      {
        "name": "strength",
        "attribute": null,
        "field_type": "u32"
      },
      {
        "name": "depth",
        "attribute": null,
        "field_type": "u32"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]