[
  {
    "name": "unlock_skill_in_tree",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < UnlockSkill >",
      "skill_id_to_unlock: u32"
    ],
    "attributes": [
      "# [doc = \" スキルポイントを消費して、指定されたIDのスキルを習得します。\"]"
    ],
    "body": [
      "let player_skills = & mut ctx . accounts . player_skills ;",
      "let player_stats = & mut ctx . accounts . player_stats ;",
      "let skill_cost = (skill_id_to_unlock / 10) . saturating_add (1) ;",
      "player_stats . skill_points = player_stats . skill_points . saturating_sub (skill_cost) ;",
      "for skill in player_skills . unlocked_skills . iter_mut ()",
      "{",
      "let should_unlock = skill . skill_id == skill_id_to_unlock ;",
      "skill . is_unlocked |= should_unlock ;",
      "}",
      "msg ! (\"Skill {} unlocked!\" , skill_id_to_unlock) ;",
      "Ok (())"
    ]
  },
  {
    "name": "UnlockSkill",
    "node_type": "struct",
    "fields": [
      {
        "name": "player_stats",
        "attribute": "# [account (mut , has_one = owner)]",
        "field_type": "Account < 'info , PlayerStats >"
      },
      {
        "name": "player_skills",
        "attribute": "# [account (mut , has_one = owner)]",
        "field_type": "Account < 'info , PlayerSkillTree >"
      },
      {
        "name": "owner",
        "attribute": null,
        "field_type": "Signer < 'info >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "PlayerStats",
    "node_type": "struct",
    "fields": [
      {
        "name": "owner",
        "attribute": null,
        "field_type": "Pubkey"
      },
      {
        "name": "skill_points",
        "attribute": null,
        "field_type": "u32"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "PlayerSkillTree",
    "node_type": "struct",
    "fields": [
      {
        "name": "owner",
        "attribute": null,
        "field_type": "Pubkey"
      },
      {
        "name": "unlocked_skills",
        "attribute": null,
        "field_type": "Vec < Skill >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "Skill",
    "node_type": "struct",
    "fields": [
      {
        "name": "skill_id",
        "attribute": null,
        "field_type": "u32"
      },
      {
        "name": "is_unlocked",
        "attribute": null,
        "field_type": "bool"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]