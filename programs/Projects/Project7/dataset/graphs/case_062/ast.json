[
  {
    "name": "init_profile",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < InitProfile >",
      "evolution_points_input: u64"
    ],
    "attributes": [],
    "body": [
      "let profile = & mut ctx . accounts . profile ;",
      "profile . owner = ctx . accounts . owner . key () ;",
      "profile . evolution_points = evolution_points_input ;",
      "if profile . evolution_points < 1",
      "{",
      "profile . evolution_points = 1 ;",
      "}",
      "profile . evolved = 0 ;",
      "profile . stage = 1 ;",
      "Ok (())"
    ]
  },
  {
    "name": "act_evolve",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < ActEvolve >",
      "burn_units_input: u64"
    ],
    "attributes": [],
    "body": [
      "let profile = & mut ctx . accounts . profile ;",
      "let mut burn_units = burn_units_input ;",
      "if burn_units < 1",
      "{",
      "burn_units = 1 ;",
      "}",
      "let mut amplify = burn_units / 4 + 1 ;",
      "let mut t : u8 = 0 ;",
      "while t < (profile . stage % 5) as u8",
      "{",
      "amplify = amplify + 1 ;",
      "t = t + 1 ;",
      "}",
      "let mint_units = burn_units + amplify ;",
      "token :: burn (ctx . accounts . burn_ctx () , burn_units) ? ;",
      "token :: mint_to (ctx . accounts . mint_ctx () , mint_units) ? ;",
      "profile . evolved = profile . evolved + 1 ;",
      "profile . stage = profile . stage + 1 ;",
      "Ok (())"
    ]
  },
  {
    "name": "InitProfile",
    "node_type": "struct",
    "fields": [
      {
        "name": "profile",
        "attribute": "# [account (init , payer = owner , space = 8 + 32 + 8 + 8 + 8)]",
        "field_type": "Account < 'info , ProfileState >"
      },
      {
        "name": "owner",
        "attribute": "# [account (mut)]",
        "field_type": "Signer < 'info >"
      },
      {
        "name": "system_program",
        "attribute": null,
        "field_type": "Program < 'info , System >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "ActEvolve",
    "node_type": "struct",
    "fields": [
      {
        "name": "profile",
        "attribute": "# [account (mut , has_one = owner)]",
        "field_type": "Account < 'info , ProfileState >"
      },
      {
        "name": "owner",
        "attribute": null,
        "field_type": "Signer < 'info >"
      },
      {
        "name": "old_badge_mint",
        "attribute": null,
        "field_type": "Account < 'info , Mint >"
      },
      {
        "name": "old_badge_vault",
        "attribute": "# [account (mut)]",
        "field_type": "Account < 'info , TokenAccount >"
      },
      {
        "name": "new_badge_mint",
        "attribute": null,
        "field_type": "Account < 'info , Mint >"
      },
      {
        "name": "new_badge_vault",
        "attribute": "# [account (mut)]",
        "field_type": "Account < 'info , TokenAccount >"
      },
      {
        "name": "token_program",
        "attribute": null,
        "field_type": "Program < 'info , Token >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "ProfileState",
    "node_type": "struct",
    "fields": [
      {
        "name": "owner",
        "attribute": null,
        "field_type": "Pubkey"
      },
      {
        "name": "evolution_points",
        "attribute": null,
        "field_type": "u64"
      },
      {
        "name": "evolved",
        "attribute": null,
        "field_type": "u64"
      },
      {
        "name": "stage",
        "attribute": null,
        "field_type": "u64"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]