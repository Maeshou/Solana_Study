[
  {
    "name": "init_board",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < InitBoard >",
      "pool_units: u64"
    ],
    "attributes": [],
    "body": [
      "let b = & mut ctx . accounts . board ;",
      "b . operator = ctx . accounts . operator . key () ;",
      "b . pool_units = if pool_units < 30 { 30 } else { pool_units } ;",
      "b . season = 1 ;",
      "b . total_paid = 3 ;",
      "Ok (())"
    ]
  },
  {
    "name": "act_payout",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < ActPayout >",
      "weight1: u16",
      "weight2: u16",
      "weight3: u16"
    ],
    "attributes": [],
    "body": [
      "let b = & mut ctx . accounts . board ;",
      "let total_weight = weight1 as u64 + weight2 as u64 + weight3 as u64 ;",
      "let mut share1 = b . pool_units * weight1 as u64 / total_weight ;",
      "let mut share2 = b . pool_units * weight2 as u64 / total_weight ;",
      "let mut share3 = b . pool_units * weight3 as u64 / total_weight ;",
      "let sum_now = share1 + share2 + share3 ;",
      "if sum_now < b . pool_units",
      "{",
      "share1 = share1 + (b . pool_units - sum_now) ;",
      "}",
      "token :: transfer (ctx . accounts . pool_to_w1 () , share1) ? ;",
      "token :: transfer (ctx . accounts . pool_to_w2 () , share2) ? ;",
      "token :: transfer (ctx . accounts . pool_to_w3 () , share3) ? ;",
      "b . total_paid = b . total_paid + share1 + share2 + share3 ;",
      "b . season = b . season + 1 ;",
      "Ok (())"
    ]
  },
  {
    "name": "InitBoard",
    "node_type": "struct",
    "fields": [
      {
        "name": "board",
        "attribute": "# [account (init , payer = operator , space = 8 + 32 + 8 + 8 + 8)]",
        "field_type": "Account < 'info , LeaderBoard >"
      },
      {
        "name": "operator",
        "attribute": "# [account (mut)]",
        "field_type": "Signer < 'info >"
      },
      {
        "name": "system_program",
        "attribute": null,
        "field_type": "Program < 'info , System >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "ActPayout",
    "node_type": "struct",
    "fields": [
      {
        "name": "board",
        "attribute": "# [account (mut , has_one = operator)]",
        "field_type": "Account < 'info , LeaderBoard >"
      },
      {
        "name": "operator",
        "attribute": null,
        "field_type": "Signer < 'info >"
      },
      {
        "name": "prize_pool_vault",
        "attribute": "# [account (mut)]",
        "field_type": "Account < 'info , TokenAccount >"
      },
      {
        "name": "winner1_vault",
        "attribute": "# [account (mut)]",
        "field_type": "Account < 'info , TokenAccount >"
      },
      {
        "name": "winner2_vault",
        "attribute": "# [account (mut)]",
        "field_type": "Account < 'info , TokenAccount >"
      },
      {
        "name": "winner3_vault",
        "attribute": "# [account (mut)]",
        "field_type": "Account < 'info , TokenAccount >"
      },
      {
        "name": "token_program",
        "attribute": null,
        "field_type": "Program < 'info , Token >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "LeaderBoard",
    "node_type": "struct",
    "fields": [
      {
        "name": "operator",
        "attribute": null,
        "field_type": "Pubkey"
      },
      {
        "name": "pool_units",
        "attribute": null,
        "field_type": "u64"
      },
      {
        "name": "season",
        "attribute": null,
        "field_type": "u64"
      },
      {
        "name": "total_paid",
        "attribute": null,
        "field_type": "u64"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]