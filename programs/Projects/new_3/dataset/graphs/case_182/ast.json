[
  {
    "name": "Project",
    "node_type": "struct",
    "fields": [
      {
        "name": "manager",
        "attribute": null,
        "field_type": "Pubkey"
      },
      {
        "name": "name",
        "attribute": null,
        "field_type": "String"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "TimeEntry",
    "node_type": "struct",
    "fields": [
      {
        "name": "user",
        "attribute": null,
        "field_type": "Pubkey"
      },
      {
        "name": "project",
        "attribute": null,
        "field_type": "Pubkey"
      },
      {
        "name": "details",
        "attribute": null,
        "field_type": "String"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "CreateProject",
    "node_type": "struct",
    "fields": [
      {
        "name": "project",
        "attribute": "# [account (init , payer = manager , space = 8 + 32 + 4 + 64)]",
        "field_type": "Account < 'info , Project >"
      },
      {
        "name": "manager",
        "attribute": "# [account (mut)]",
        "field_type": "Signer < 'info >"
      },
      {
        "name": "system_program",
        "attribute": null,
        "field_type": "Program < 'info , System >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "LogTime",
    "node_type": "struct",
    "fields": [
      {
        "name": "project",
        "attribute": "# [doc = \" Project.manager == manager.key() は検証される\"] # [account (mut , has_one = manager)]",
        "field_type": "Account < 'info , Project >"
      },
      {
        "name": "time_entry",
        "attribute": "# [doc = \" TimeEntry.project ⇔ project.key() の検証が **ない**\"] # [account (init , payer = user , space = 8 + 32 + 32 + 4 + 128)]",
        "field_type": "Account < 'info , TimeEntry >"
      },
      {
        "name": "manager",
        "attribute": "# [account (mut)]",
        "field_type": "Signer < 'info >"
      },
      {
        "name": "user",
        "attribute": "# [account (mut)]",
        "field_type": "Signer < 'info >"
      },
      {
        "name": "system_program",
        "attribute": null,
        "field_type": "Program < 'info , System >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "create_project",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < CreateProject >",
      "name: String"
    ],
    "attributes": [
      "# [doc = \" プロジェクトを新規作成\"]"
    ],
    "body": [
      "let p = & mut ctx . accounts . project ;",
      "p . manager = ctx . accounts . manager . key () ;",
      "p . name = name ;",
      "Ok (())"
    ]
  },
  {
    "name": "log_time",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < LogTime >",
      "details: String"
    ],
    "attributes": [
      "# [doc = \" 作業時間を記録\"]"
    ],
    "body": [
      "let e = & mut ctx . accounts . time_entry ;",
      "let p = & ctx . accounts . project ;",
      "e . user = ctx . accounts . user . key () ;",
      "e . project = p . key () ;",
      "e . details = details ;",
      "Ok (())"
    ]
  }
]