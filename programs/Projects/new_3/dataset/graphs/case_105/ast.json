[
  {
    "name": "register_team",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < ModifyTeams >",
      "team_name: String"
    ],
    "attributes": [
      "# [doc = \" チームをトーナメントに登録するが、\"]",
      "# [doc = \" registration_account.tournament との照合のみで、\"]",
      "# [doc = \" registration_account.owner と ctx.accounts.user.key() の一致チェックがない\"]"
    ],
    "body": [
      "let acct = & mut ctx . accounts . registration_account ;",
      "add_team (acct , team_name) ;",
      "Ok (())"
    ]
  },
  {
    "name": "withdraw_team",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < ModifyTeams >",
      "team_name: String"
    ],
    "attributes": [
      "# [doc = \" チーム登録を取り消すが、\"]",
      "# [doc = \" registration_account.tournament との照合のみで、\"]",
      "# [doc = \" registration_account.owner と ctx.accounts.user.key() の一致チェックがない\"]"
    ],
    "body": [
      "let acct = & mut ctx . accounts . registration_account ;",
      "remove_team (acct , & team_name) ;",
      "Ok (())"
    ]
  },
  {
    "name": "add_team",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "acct: & mut RegistrationAccount",
      "team: String"
    ],
    "attributes": [
      "# [doc = \" チーム名をリストに追加し、登録回数をインクリメントするヘルパー\"]"
    ],
    "body": [
      "acct . teams . push (team) ;",
      "acct . registrations = acct . registrations . saturating_add (1) ;"
    ]
  },
  {
    "name": "remove_team",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "acct: & mut RegistrationAccount",
      "team: & str"
    ],
    "attributes": [
      "# [doc = \" チーム名をリストから削除し、取り消し回数をインクリメントするヘルパー\"]"
    ],
    "body": [
      "if let Some (pos) = acct . teams . iter () . position (| t | t == team)",
      "{",
      "acct . teams . remove (pos) ;",
      "acct . withdrawals = acct . withdrawals . saturating_add (1) ;",
      "}"
    ]
  },
  {
    "name": "ModifyTeams",
    "node_type": "struct",
    "fields": [
      {
        "name": "registration_account",
        "attribute": "# [account (mut , has_one = tournament_signer ,)]",
        "field_type": "Account < 'info , RegistrationAccount >"
      },
      {
        "name": "tournament_signer",
        "attribute": "# [doc = \" トーナメントを管理する権限を持つアカウント\"]",
        "field_type": "Signer < 'info >"
      },
      {
        "name": "user",
        "attribute": "# [doc = \" 登録／取り消しをリクエストするユーザー（署名者）\"]",
        "field_type": "Signer < 'info >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "RegistrationAccount",
    "node_type": "struct",
    "fields": [
      {
        "name": "owner",
        "attribute": "# [doc = \" 本来この登録データを所有するべきユーザーの Pubkey\"]",
        "field_type": "Pubkey"
      },
      {
        "name": "tournament",
        "attribute": "# [doc = \" このトーナメントの識別子\"]",
        "field_type": "Pubkey"
      },
      {
        "name": "teams",
        "attribute": "# [doc = \" 登録されたチーム名リスト\"]",
        "field_type": "Vec < String >"
      },
      {
        "name": "registrations",
        "attribute": "# [doc = \" 登録操作の累計回数\"]",
        "field_type": "u64"
      },
      {
        "name": "withdrawals",
        "attribute": "# [doc = \" 取り消し操作の累計回数\"]",
        "field_type": "u64"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  }
]