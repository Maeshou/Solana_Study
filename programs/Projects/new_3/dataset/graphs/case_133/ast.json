[
  {
    "name": "Campaign",
    "node_type": "struct",
    "fields": [
      {
        "name": "creator",
        "attribute": null,
        "field_type": "Pubkey"
      },
      {
        "name": "funds_raised",
        "attribute": null,
        "field_type": "u64"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "Donation",
    "node_type": "struct",
    "fields": [
      {
        "name": "donor",
        "attribute": null,
        "field_type": "Pubkey"
      },
      {
        "name": "campaign",
        "attribute": null,
        "field_type": "Pubkey"
      },
      {
        "name": "amount",
        "attribute": null,
        "field_type": "u64"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "Contribute",
    "node_type": "struct",
    "fields": [
      {
        "name": "campaign",
        "attribute": "# [doc = \" Campaign.creator == donor.key() は検証するが…\"] # [account (mut , has_one = creator)]",
        "field_type": "Account < 'info , Campaign >"
      },
      {
        "name": "donation",
        "attribute": "# [doc = \" Donation.campaign == campaign.key() は一切検証していない\"] # [account (mut)]",
        "field_type": "Account < 'info , Donation >"
      },
      {
        "name": "donor",
        "attribute": "# [doc = \" 寄付者の署名チェックはある\"]",
        "field_type": "Signer < 'info >"
      }
    ],
    "inputs": null,
    "attributes": null,
    "body": null
  },
  {
    "name": "contribute",
    "node_type": "function",
    "fields": null,
    "inputs": [
      "ctx: Context < Contribute >",
      "amount: u64"
    ],
    "attributes": [],
    "body": [
      "ctx . accounts . donation . donor = ctx . accounts . donor . key () ;",
      "ctx . accounts . donation . amount = ctx . accounts . donation . amount . checked_add (amount) . unwrap () ;",
      "ctx . accounts . campaign . funds_raised = ctx . accounts . campaign . funds_raised . checked_add (amount) . unwrap () ;",
      "Ok (())"
    ]
  }
]